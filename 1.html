<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono&family=IBM+Plex+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <script>
        // small constants for About contour generation
        const aboutContourNumPoints = 260;
        const aboutContourWobbleAmp = 34;
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono&family=IBM+Plex+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* About grid layout */
        .about-grid{display:grid;grid-template-columns:40% 60%;gap:48px;align-items:start;max-width:1200px;margin:0 auto;padding:40px 20px}
        @media(max-width:1100px){.about-grid{grid-template-columns:40% 60%;gap:28px;padding:30px 18px}}
        @media(max-width:900px){.about-grid{grid-template-columns:1fr;gap:24px;padding:30px 18px}}

        /* Watermark behind portrait */
        .about-watermark{position:absolute;left:8%;top:6%;font-size:14px;color:rgba(255,255,255,0.06);letter-spacing:0.18em;pointer-events:none;z-index:1}

        /* Portrait wrapper: responsive sizing so image scales with page width */
        /* Portrait fills its parent column (fluid) but is constrained by max-width */
        .about-portrait-wrapper{position:relative;display:block;width:100%;max-width:450px;border-radius:0;overflow:visible;padding:6px;margin:0 auto}
        .about-portrait{display:block;max-width:100%;width:auto;height:auto;border-radius:0;position:relative;z-index:1;box-shadow:none;transition:none}
        /* SVG image inside About: ensure it scales down to wrapper and remains visible */
        .about-portrait-wrapper svg { width: 100%; height: auto; display: block; }
        .about-portrait-wrapper { max-width: 360px; }
        .about-svg-image { display:block; width:100%; height:auto; transition: filter 380ms ease, transform 420ms cubic-bezier(.2,.9,.2,1); filter: brightness(0.85) saturate(0.9) contrast(0.95); transform-origin: 50% 50%; }
        .about-portrait-wrapper:hover .about-svg-image { filter: brightness(1.06) saturate(1.12) contrast(1.02); transform: scale(1.02); }
        /* Embossed concentric rings (tree-ring inspired) for About portrait */
        .about-contour {
            transition: stroke 420ms cubic-bezier(.2,.9,.2,1), transform 420ms cubic-bezier(.2,.9,.2,1), filter 420ms cubic-bezier(.2,.9,.2,1), opacity 420ms;
            stroke: rgba(255,255,255,0.12);
            stroke-width: 1.05;
            fill: none;
            opacity: 0.95;
            mix-blend-mode: screen;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.55));
            transform-origin: 50% 50%;
            pointer-events: none;
        }
        /* silhouette removed — use project-style contours instead */
        .about-portrait-wrapper:hover .about-contour { stroke: rgba(0,255,204,0.92); filter: drop-shadow(0 6px 18px rgba(0,255,204,0.14)); transform: scale(1.02); }
        /* Strong override to ensure the about image is visible and participates in layout */
        #about-static-img { display: block !important; position: static !important; visibility: visible !important; opacity: 1 !important; max-width: 100% !important; height: auto !important; }

        /* Simplify: hide wrapper decorative rings so only the SVG clip + contour remains */
        .about-portrait-wrapper::before, .about-portrait-wrapper::after { display: none !important; }

        /* Hover: project-style subtle zoom (like other project images) */
        .about-portrait-wrapper:hover .about-portrait{transform:scale(1.03)}
        .about-portrait-wrapper:hover::before{box-shadow:0 0 0 12px rgba(120,180,255,0.09)}
        .about-portrait-wrapper:hover::after{box-shadow:0 0 0 18px rgba(120,180,255,0.05)}
        /* Ensure the new SVG <image> inside the About portrait receives the same hover treatment */
        .about-portrait-wrapper:hover .project-img { filter: brightness(1.03) saturate(1.04); transform: translateY(-2px) scale(1.02); transition: filter 0.45s ease, transform 0.6s ease; }
        /* About-specific: start desaturated (black & white) and go full color on hover */
        .about-portrait-wrapper .project-img { filter: grayscale(100%) brightness(0.85); transition: filter 420ms cubic-bezier(.2,.9,.2,1), transform 420ms cubic-bezier(.2,.9,.2,1); }
        .about-portrait-wrapper:hover .project-img { filter: grayscale(0%) brightness(1.03) saturate(1.06); transform: translateY(-2px) scale(1.02); }
        /* Tools inline items */
        .about-tools{display:flex;flex-wrap:wrap;gap:28px;align-items:center;justify-content:flex-start}
        .tool-item{background:transparent;padding:2px 6px;border-radius:4px;color:rgba(255,255,255,0.95);font-size:18px}

        /* Bottom info layout: spread two main columns */
        .about-bottom{display:flex;flex-wrap:wrap;gap:18px;justify-content:space-between;align-items:flex-start}
        .about-bottom > .col{flex:1 1 320px}

        /* Glitch effect on heading on hover */
        /* Title positioning and lighter weight; vertical on wide screens */
        .about-right h1{position:relative;display:inline-block;font-weight:300;color:#cbd5e1}
        .glitch-hover{transition:all 220ms ease}
        .glitch-hover:hover{color:#dbeafe}
        .glitch-hover:hover{text-shadow:2px 0 0 rgba(255,255,255,0.06), -2px 0 0 rgba(180,120,255,0.04), 0 2px 0 rgba(120,255,180,0.03)}
        .glitch-hover:hover::after{content:'';position:absolute;left:0;top:0;right:0;bottom:0;mix-blend-mode:screen;opacity:0.06}

        /* Vertical headline on wide screens, layered behind image */
        @media(min-width:1200px){
            .about-right h1{writing-mode:vertical-rl;transform:translateY(6%);font-size:28px;opacity:0.9;position:relative;z-index:2;color:#9ca3af}
            .about-left{z-index:1}
        }
        /* Alternative: place a large faint title behind image for layered depth */
        .about-right .behind-title{position:absolute;left:-24%;top:6%;font-size:88px;color:rgba(30,41,59,0.06);font-weight:300;z-index:0;pointer-events:none}
                @keyframes scroll-left {
                    0% { transform: translateX(0); }
                    100% { transform: translateX(-50%); }
                }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #050505; /* 极深的黑 */
            overflow: auto;
            font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            color: #e0e0e0;
            cursor: default;
        }

        /* --- Custom Cursor --- */
        #custom-cursor { display: none; }
        .cursor-ripple {
            position: fixed; top: 0; left: 0; width: 40px; height: 40px;
            border: 1px solid rgba(255, 255, 255, 0.6); border-radius: 50%;
            pointer-events: none; z-index: 9998;
            transform: translate(-50%, -50%) scale(1); opacity: 0.6;
            animation: ripple-anim 1s ease-out forwards;
        }
        @keyframes ripple-anim {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0.6; }
            100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; }
        }

        /* Global Brand */
        #global-brand {
            position: fixed; top: 40px; left: 40px; z-index: 60;
            font-family: 'Courier New', Courier, monospace; font-size: 20px; font-weight: 700; letter-spacing: 4px;
            color: #ffffff; text-transform: uppercase; cursor: pointer;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
            transition: opacity 0.3s, text-shadow 0.3s; mix-blend-mode: difference;
        }
        #global-brand:hover { opacity: 0.8; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); }
        #global-brand::after { content: '_'; display: inline-block; margin-left: 5px; animation: blink 1s step-end infinite; color: #00ffcc; }
        @keyframes blink { 50% { opacity: 0; } }

        /* Backgrounds */
        #bg-image {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
            /* 背景图 */
            background-image: url('./image_bc43dd.jpg'); 
            background-size: cover; background-position: center;
            opacity: 0.4; filter: grayscale(100%) contrast(120%); transition: opacity 1s ease;
			pointer-events: none;
        }
        /* When the site-level video is enabled, hide the static bg image */
        #bg-site[style*="display:block"] ~ #bg-image { display: none; }
        #bg-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2;
            background: radial-gradient(circle, rgba(5,5,5,0.6) 0%, rgba(5,5,5,0.95) 100%);
			pointer-events: none;
        }
        #canvas-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10;
            cursor: default; transition: opacity 1s ease;
        }

        /* Project detail hero video wrapper */
        #page-project-detail .project-body { position: relative; z-index: 10; }
        .project-hero-video {
            position: fixed; left: 0; right: 0; bottom: 0;
            width: 100%; height: 40vh; overflow: hidden;
            z-index: -1; pointer-events: none; opacity: 0.45;
        }
        .project-hero-video video { width: 100%; height: 100%; object-fit: cover; display: block; }
        /* Service blueprint hover glow */
        .service-blueprint .blue-overlay { background: linear-gradient(180deg, rgba(0,255,204,0.12), rgba(0,255,204,0.06)); }
        .service-blueprint img { filter: none; }
        .service-blueprint:hover img { transform: scale(1.03); filter: brightness(1.05) saturate(1.05); }
        .service-blueprint:hover .blue-overlay { opacity: 1; }

        /* Fullscreen blueprint hero tweaks */
        .blueprint-hero { position: relative; cursor: zoom-in; }
        .blueprint-hero img { display: block; filter: none; }
        .blueprint-hero .hero-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.25); }

        /* Technical Setup alignment tweaks */
        .tech-setup-grid { align-items: center; }

        /* Technical Setup side-by-side images */
        .tech-setup-row { display: flex; gap: 1rem; align-items: flex-start; }
        .tech-setup-row .tech-img { flex: 0 0 48%; max-width: 48%; }
        .tech-setup-row .tech-img img { width: 100%; height: auto; object-fit: cover; }
        @media (max-width: 767px) {
            .tech-setup-row { flex-direction: column; }
            .tech-setup-row .tech-img { flex: 0 0 auto; max-width: 100%; }
        }

        /* ---- Editorial flow styles ---- */
        /* Tech / Minimal typography */
        .page-editorial { max-width: 1100px; }
        .editorial-header .editorial-title { font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif !important; font-size:48px; line-height:1; margin:0; color:#ffffff; font-weight:800 !important; letter-spacing:0.02em; }
        @media(min-width:900px){ .editorial-header .editorial-title { font-size:96px; font-weight:900 !important; } }

        /* Global Grid for About: two columns 40% / 60% */
        .about-global { display:grid; grid-template-columns:40% 60%; gap:80px; align-items:start; }
        @media(max-width:900px){ .about-global { display:block; gap:32px; } }

        .editorial-text p { font-size:1.1rem; color: #cccccc; line-height:1.7; }
        /* Right-column (About) - slightly smaller paragraphs for better balance */
        .about-right .editorial-text p { font-size:1rem !important; line-height:1.75 !important; }
        .about-right .lead { font-size:1.02rem !important; }

        /* Drop cap for first paragraph */
        .dropcap { float:left; font-size:3.6rem; line-height:0.85; margin-right:12px; font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight:700; color:#e6eef8; }
        /* Slightly smaller dropcap in About right for balance */
        .about-right .dropcap { font-size:2.6rem !important; margin-right:10px; }

        /* Portrait mask gradient to soften bottom edge */
        .portrait-mask { position:relative; display:block; overflow:visible; background-color: #050505; }
        /* Portrait inner preserves aspect ratio; image fills via cover to avoid stretching */
        .portrait-mask .portrait-inner { position:relative; width:100%; max-width:100%; aspect-ratio:auto; overflow:visible; }
        /* Ensure portrait fills its column and scales with viewport */
        .about-portrait-wrapper, .portrait-inner, .about-portrait-wrapper img { width:auto; max-width:100%; }
        .portrait-mask img { width:auto; height:auto; max-width:100%; }
        @media (max-width:1200px) {
            .portrait-mask .portrait-inner { aspect-ratio: 3.5/3; }
        }
        @media (max-width:900px) {
            /* Use a taller aspect ratio on narrow screens to avoid cutting off the face */
            .portrait-mask .portrait-inner { aspect-ratio: 3/4; }
            .portrait-mask img { object-position: center 30%; }
            .about-right .editorial-text p { font-size:0.98rem !important; }
            .about-left .editorial-title { font-size:3.2rem !important; }
        }

        /* When layout collapses to stacked (single-column), keep portrait moderate and centered */
        @media (max-width:900px) {
            /* Constrain portrait in stacked layout: don't let it fill full width */
            .about-portrait-wrapper { width: min(80vw, 400px); max-width: 400px; margin: 0 auto; }
            /* Enforce horizontal contour and proportional scaling */
            .about-portrait { max-width: 400px !important; width: 100% !important; height: auto !important; display:block !important; margin:30px auto !important; max-height: none !important; }
        }

        /* Mobile adjustments: portrait occupies ~80% of viewport width and is centered */
        @media (max-width:768px) {
            /* Mobile: portrait occupies ~80% width but capped to 400px and centered */
            .about-portrait-wrapper { width: 80vw; max-width: 400px; margin: 0 auto; }
            /* Enforce horizontal contour and proportional scaling on smaller devices */
            .about-portrait { max-width: 400px !important; width: 100% !important; height: auto !important; display:block !important; margin:30px auto !important; max-height: none !important; }
        }
        /* Ensure the About portrait image is visible and participates in layout */
        .portrait-mask img { position: static !important; left: auto !important; top: auto !important; width: auto !important; height: auto !important; max-width:100%; object-fit: none; object-position: center; border-radius: 0; filter:none; transition: none; display:block; }
        /* Feather the image edges with a soft radial mask for natural contour */
        /* Remove mask-image so the about portrait is not clipped */
        .portrait-mask { -webkit-mask-image: none; mask-image: none; }
        .portrait-mask img:hover { filter:none; transform: none; }

        /* Water ripple overlay using pseudo-elements */
        .portrait-mask { position: relative; }
        /* Add a subtle vignette to focus the elliptical portrait */
        .portrait-mask::before, .portrait-mask::after { display: none !important; }

        /* Ensure the About portrait has no extra effects */
        .about-portrait { filter: none !important; transform: none !important; box-shadow: none !important; border-radius: 0 !important; }
        .about-portrait:hover { transform: none !important; }

        /* waterRipple keyframes left in-place but pseudo-elements are disabled above */

        /* Disable JS/local pointer ripple visuals — keep the page visually simple */
        .portrait-mask .local-ripple { display: none !important; }

        /* Make portrait wrapper non-interactive — no hover, no zoom cursor */
        .about-portrait-wrapper { cursor: default; }
        .about-portrait-wrapper:hover .about-portrait { filter: none; transform: none; }
        /* portrait gradient and obsolete ring3 removed; SVG contour now handles edge visuals */

        /* Water-like ripple overlay: subtle concentric rings animated */
        /* 移除旧的水波 overlay，使用伪元素年轮替代 */

        /* Simplify: hide the complex SVG wobble and use project-like hover interaction */
        .about-portrait-wrapper { position:relative; }
        .about-portrait-wrapper .ring-svg { display:none; }
        .about-portrait-wrapper .portrait-mask { position:relative; z-index:1; }

        /* Divider: subtle thin line or whitespace */
        .editorial-divider { height:1px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.04), rgba(255,255,255,0.02)); }

        /* Details grid at bottom spacing */
        .editorial-details { margin-top: 18px; }

        @media (max-width: 900px) {
            .dropcap { font-size:3rem; margin-right:10px; }
            .portrait-mask { order:-1; }
        }

        /* Project detail background image handling */
        #page-project-detail .project-body {
            background-color: transparent;
            background-blend-mode: overlay;
        }
        #page-project-detail .project-body::before {
            content: '';
            position: absolute; inset: 0; z-index: 5;
            background: rgba(5,5,5,0.6); /* dark overlay for readability */
            pointer-events: none;
        }
        #page-project-detail .project-body > * { position: relative; z-index: 10; }
        /* Ensure images and text blocks align vertically in interleaved sections */
        #page-project-detail .project-body .grid.items-start { align-items: start; }
        #page-project-detail .project-body .grid.items-center { align-items: center; }
        #page-project-detail .project-body img { display: block; }

        /* Footer & Nav */
        #footer-hint {
            position: absolute; bottom: 40px; width: 100%; text-align: center; font-size: 13px;
            letter-spacing: 3px; color: #888; z-index: 20; pointer-events: none; text-transform: uppercase;
            transition: opacity 0.5s; font-weight: 300; text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }
        #footer-hint span { color: #fff; font-weight: 500; margin-left: 8px; opacity: 0; transition: opacity 0.3s; }
        #footer-hint span.visible { opacity: 1; }

        .nav-bar {
            position: fixed; top: 0; left: 0; width: 100%; padding: 35px 40px;
            display: flex; justify-content: flex-end; align-items: center;
            background: linear-gradient(to bottom, #050505 0%, rgba(5,5,5,0) 100%); z-index: 40; pointer-events: none;
        }
        .nav-links { pointer-events: auto; }
        .nav-links span {
            margin-left: 30px; cursor: pointer; font-size: 13px; font-family: 'Courier New', monospace;
            letter-spacing: 1px; color: #666; transition: color 0.3s;
        }
        .nav-links span:hover { color: #fff; }

        /* Content Pages */
        .content-page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5;
            opacity: 0; visibility: hidden; transition: opacity 0.8s ease, visibility 0.8s;
            overflow-y: auto; background-color: #050505; padding-top: 80px;
        }
        .content-page.active { z-index: 30; opacity: 1; visibility: visible; }

        /* Responsive nav: hide horizontal nav at small widths and show mobile menu */
        #nav-toggle { display: none; position: fixed; top: 36px; right: 40px; z-index: 70; background: transparent; color: #00ffcc; border: 1px solid rgba(255,255,255,0.06); padding: 8px 10px; border-radius: 4px; font-size: 18px; cursor: pointer; pointer-events: auto; }
        #mobile-menu { display: none; position: fixed; top: 0; right: 0; height: 100vh; width: 320px; background: linear-gradient(180deg, rgba(5,5,5,0.96), rgba(5,5,5,0.98)); z-index: 69; padding: 80px 24px; box-shadow: -10px 0 30px rgba(0,0,0,0.6); }
        #mobile-menu.open { display: block; }
        #mobile-menu .mobile-links { display: flex; flex-direction: column; gap: 18px; }
        #mobile-menu .mobile-links span { color: #cbd5e1; font-family: 'Courier New', monospace; cursor: pointer; font-size: 16px; }

        @media (max-width: 900px) {
            .nav-links { display: none; }
            #nav-toggle { display: block; }
            /* prevent global-brand overlap by nudging brand left on small screens */
            #global-brand { left: 20px; top: 28px; }
        }
        .content-page::-webkit-scrollbar { width: 6px; }
        .content-page::-webkit-scrollbar-thumb { background-color: #333; border-radius: 3px; }

        /* Project Module Styles */
        .project-module {
            display: flex; flex-direction: column; align-items: center; text-align: center;
            cursor: pointer; transition: transform 0.4s ease-out;
        }
        .blob-wrapper { position: relative; width: 100%; aspect-ratio: 4/3; margin-bottom: 1rem; }
        .contour-path {
            fill: none; stroke: rgba(255, 255, 255, 0.2); stroke-width: 1.2;
            transition: all 0.5s ease; transform-origin: center;
        }
        .project-img {
            transition: filter 0.5s ease, transform 2s cubic-bezier(0.2, 0.8, 0.2, 1);
            filter: brightness(0.6) grayscale(20%); transform-origin: center;
        }
        .project-module:hover .project-img { filter: brightness(1.1) grayscale(0%); transform: scale(1.05); }

        /* Removed About-specific SVG image/contour rules so the portrait displays with no effects */
        .project-module:hover .contour-outer { stroke: rgba(255, 255, 255, 0.9); stroke-width: 2; filter: drop-shadow(0 0 8px rgba(0, 255, 204, 0.4)); }
        .project-module:hover .contour-inner { stroke: rgba(255, 255, 255, 0.5); }
        .project-info {
            opacity: 0.7; transition: opacity 0.3s ease, transform 0.3s ease; padding-top: 0.75rem;
            display: flex; flex-direction: column; align-items: center; gap: 0.25rem;
        }
        .project-module:hover .project-info { opacity: 1; transform: translateY(-5px); }
        .proj-title {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 700; font-size: 1.25rem;
            letter-spacing: 0.05em; color: #e0e0e0; margin: 0; text-transform: uppercase; transition: color 0.3s;
        }
        .project-module:hover .proj-title { color: #00ffcc; }

        /* Ensure project titles are bold and left-aligned; allow subtitles to center */
        .proj-title, #page-project-detail h3, #page-project-detail h4 { font-weight: 700 !important; text-align: left; }
        /* Center subtitle on project detail pages */
        #page-project-detail h2 { text-align: center; font-weight: 600; }
        /* Center the Urban Stray Cat title in the projects overview module */
        .project-module[data-project="project-cat"] .proj-title { text-align: center !important; }

        /* Stronger enforcement for detail page titles (in case of overrides) */
        #page-project-detail .proj-title, #page-project-detail .project-header h1, #page-project-detail h1, #page-project-detail h2, #page-project-detail h3 { font-weight: 900 !important; }

        /* (role headline removed) */

        /* Align project text and images to left for consistent layout */
        #page-project-detail .project-body, #page-project-detail .project-body * { text-align: left; }
        #page-project-detail .project-body img { display: block; margin-left: 0; margin-right: auto; }

        /* Editorial text: use tech-style sans font for readability */
        .editorial-text, .editorial-text p { font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif; }

        /* Restore meta label to sans font for hierarchy, keep values monospace */
        .project-meta .meta-label { font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif !important; color:#666666; }

        /* Project meta (TYPE / ROLE / TOOLS) - left-aligned, labels in sans, values in monospace */
        .project-meta { display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 28px 64px; align-items:start; width:100%; }
        .project-meta .meta-item { min-width:0; }
        .project-meta .meta-label { font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif !important; text-transform:uppercase; font-size:0.78rem; color:#666666; letter-spacing:1.4px; margin-bottom:12px; }
        .project-meta .meta-value { font-family: 'Space Mono', 'IBM Plex Mono', 'Courier New', monospace !important; font-size:1.05rem; color:#00ffcc; line-height:1.9; }
        .project-meta .meta-value.alt { color:#e6eef8 }
        .project-meta .meta-item { text-align:left }

        @media (max-width: 900px) {
            .project-meta { grid-template-columns: 1fr; gap: 12px 0; }
        }
        /* previously added project-meta constraint removed to allow per-project wrapper classes */
        .proj-meta {
            font-family: 'Courier New', monospace; font-size: 0.75rem; color: #888;
            margin: 0; text-transform: uppercase; letter-spacing: 0.05em;
        }

        /* About-specific tweaks */
        .editorial-body .dropcap { float:left; font-size:3rem; line-height:0.8; margin-right:0.6rem; font-weight:700; color:#e6eef8; }
        .editorial-portrait .portrait-mask { max-width:760px; }
        .editorial-portrait .about-portrait { transform: scale(1.03); }
        .about-portrait { display:block; }
        .project-meta .meta-value > div span { font-family: 'Space Mono', monospace; }
        .project-meta .meta-item .meta-value { font-size:1.02rem; }
        .project-meta .meta-item .meta-value span { display:block; margin-right:0; margin-bottom:8px; }

        /* Ensure tools column is less dense: stack vertically and increase size */
        .project-meta .meta-item:nth-child(3) .meta-value { display:flex; flex-direction:column; gap:10px; }
        .project-meta .meta-item:nth-child(3) .meta-value span { font-size:1.02rem; color:#00ffcc; }

        /* Make green monospace slightly smaller and more subtle on wider screens */
        @media (min-width: 1100px) {
            .project-meta .meta-item:nth-child(3) .meta-value span { font-size:1.06rem; }
        }
        @media (max-width: 900px) {
            .project-meta .meta-item:nth-child(3) .meta-value { flex-direction:row; flex-wrap:wrap; gap:12px; }
            .project-meta .meta-item:nth-child(3) .meta-value span { font-size:1.0rem; }
        }

        @media (max-width: 900px) {
            .editorial-text { flex:1 !important; max-width:100% !important; }
            .editorial-portrait { width:100% !important; }
            .editorial-body { gap:12px !important; }
            .editorial-body .dropcap { font-size:2.2rem; margin-right:0.4rem; }
        }
        .proj-desc {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 0.875rem; font-weight: 300;
            color: #aaa; max-width: 520px; margin: 0; line-height: 1.4; text-align: center;
        }
        .module-hero { transform: scale(1.1); }
        .module-hero:hover { transform: scale(1.12); }
        .module-standard { transform: scale(0.9); }
        .module-standard:hover { transform: scale(0.92); }

        /* Timeline & Modal */
        .timeline-item { transition: background-color 0.3s, transform 0.2s; cursor: pointer; padding: 1.5rem; margin-left: -1.5rem; border-radius: 4px; border: 1px solid transparent; }
        .timeline-item:hover { background-color: rgba(255, 255, 255, 0.03); border-color: rgba(255, 255, 255, 0.05); }

        /* Timeline visuals tuned to 'year-ring / breathing' concept */
        .timeline-container { border-left: 0.5px solid rgba(255,255,255,0.06); }

        /* Year label: bold monospace, larger and subtle gray */
        .timeline-year-toggle { color: #666666; font-weight: 800; }

        /* Breathing timeline dot (centered on the vertical line) */
        .timeline-dot {
            left: -1.25rem; /* centered on border line */
            transform: translateX(-50%);
            z-index: 12;
            width: 0.6rem; height: 0.6rem; border-radius: 9999px; background: #ffffff; box-shadow: 0 0 8px rgba(255,255,255,0.4);
            position: absolute;
        }
        .timeline-dot::before, .timeline-dot::after {
            content: '';
            position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%) scale(1);
            width: 100%; height: 100%; border-radius: inherit; border: 1px solid rgba(255,255,255,0.18); background: transparent; z-index: -1; pointer-events: none;
            animation: dotRipple 3.8s infinite ease-out;
        }
        .timeline-dot::after { animation-delay: 1.9s; border-color: rgba(255,255,255,0.12); }

        @keyframes dotRipple {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.9; }
            100% { transform: translate(-50%, -50%) scale(2.2); opacity: 0; border-width: 0; }
        }

        /* Remove horizontal connectors and ensure content is left-aligned with padding for hierarchy */
        .timeline-item { margin-left: 0; padding-left: 1.5rem; }
        .timeline-list .timeline-item { padding-left: 2.5rem; }

        /* Collapsible year groups: animate expansion using max-height + opacity */
        .timeline-year .timeline-list {
            max-height: 2000px; /* large enough to contain content */
            overflow: hidden;
            opacity: 1;
            transform: translateY(0);
            transition: max-height 900ms cubic-bezier(.2,.8,.2,.98), opacity 700ms cubic-bezier(.2,.8,.2,.98), transform 700ms cubic-bezier(.2,.8,.2,.98);
        }
        .timeline-year.collapsed .timeline-list {
            max-height: 0;
            opacity: 0;
            transform: translateY(-6px);
            pointer-events: none;
        }

        /* On small screens, collapse year groups by default and show toggle cursor */
        @media (max-width: 900px) {
            .timeline-year .timeline-year-toggle { cursor: pointer; }
            .timeline-year .timeline-year-toggle::after { content: ' ▾'; opacity: 0.6; }
            .timeline-year.collapsed .timeline-year-toggle::after { content: ' ▸'; }
            .timeline-year.collapsed .timeline-list { display:none; }
        }
        #exhibition-modal, #lightbox-modal { transition: opacity 0.3s ease; }
        #exhibition-modal.open, #lightbox-modal.open { display: flex; opacity: 1; }
        #modal-content { transform: scale(0.95); transition: transform 0.3s ease; }
        #exhibition-modal.open #modal-content { transform: scale(1); }

        /* Modal spacing tweaks: more breathable layout */
        #exhibition-modal #modal-content {
            padding: 28px; /* increase internal padding */
            gap: 18px; /* visual gap between sections */
            max-width: 900px; /* don't let modal grow too wide */
            width: calc(100% - 48px);
        }
        #exhibition-modal #modal-content .mb-6 { margin-bottom: 18px; }
        #exhibition-modal #modal-content #modal-title { margin-bottom: 6px; }
        #exhibition-modal #modal-content #modal-desc { max-width: none; width: 100%; box-sizing: border-box; margin-top: 8px; margin-bottom: 12px; line-height: 1.6; }
        #exhibition-modal #modal-content #modal-role { margin-bottom: 10px; }
        #exhibition-modal #modal-content #modal-images-container { gap: 12px; padding-bottom: 8px; }
        @media (max-width: 640px) {
            #exhibition-modal #modal-content { padding: 18px; width: calc(100% - 32px); }
            #exhibition-modal #modal-content #modal-desc { max-width: 54ch; }
        }
        /* Ensure modal images/videos keep consistent sizes and spacing */
        /* Responsive thumbnail card: width caps but can scale with viewport */
        #exhibition-modal #modal-content .thumb-card,
        #exhibition-modal #modal-content .flex-none.w-80 {
            width: min(220px, 40vw) !important;
            flex: 0 0 auto;
            box-sizing: border-box;
        }

        /* No captions under thumbnails; images only */
        #exhibition-modal #modal-content .thumb-caption { display: none; }
        #exhibition-modal #modal-content img { max-width: 100%; height: auto; display: block; }
        #exhibition-modal #modal-content video { max-width: 100%; height: auto; display: block; }
        /* Ensure modal text elements adapt to modal width and wrap neatly */
        #exhibition-modal #modal-content #modal-title {
            font-size: clamp(18px, 2.6vw, 24px);
            line-height: 1.15;
            word-break: break-word;
            hyphens: auto;
            max-width: 100%;
        }
        #exhibition-modal #modal-content #modal-meta,
        #exhibition-modal #modal-content #modal-role {
            font-size: clamp(12px, 1.6vw, 14px);
            word-break: break-word;
            max-width: 100%;
        }
        #exhibition-modal #modal-content #modal-desc {
            max-width: none; /* allow description to use full modal width */
            width: 100%;
            box-sizing: border-box;
            white-space: normal;
            overflow-wrap: break-word;
        }
        /* Progressive staggered fade-in for modal content */
        #exhibition-modal #modal-content > * {
            opacity: 0;
            transform: translateY(8px);
            transition: opacity 420ms cubic-bezier(.2,.9,.2,1), transform 420ms cubic-bezier(.2,.9,.2,1);
        }
        /* Stagger delays for first few children */
        #exhibition-modal.open #modal-content > *:nth-child(1) { transition-delay: 40ms; }
        #exhibition-modal.open #modal-content > *:nth-child(2) { transition-delay: 90ms; }
        #exhibition-modal.open #modal-content > *:nth-child(3) { transition-delay: 140ms; }
        #exhibition-modal.open #modal-content > *:nth-child(4) { transition-delay: 190ms; }
        #exhibition-modal.open #modal-content > *:nth-child(5) { transition-delay: 240ms; }
        #exhibition-modal.open #modal-content > *:nth-child(6) { transition-delay: 290ms; }
        #exhibition-modal.open #modal-content > * { opacity: 1; transform: translateY(0); }

          /* Slight stagger for each image tile inside the images container
              Make all tiles visible when modal is opened; target our thumb-card wrappers. */
          #exhibition-modal #modal-images-container .thumb-card,
          #exhibition-modal #modal-images-container .flex-none.w-80 { opacity: 0; transform: translateY(6px); transition: opacity 420ms ease, transform 420ms ease; }
          #exhibition-modal.open #modal-images-container .thumb-card,
          #exhibition-modal.open #modal-images-container .flex-none.w-80 { opacity: 1; transform: translateY(0); }

        /* Lightbox Image Scale */
        #lightbox-img { transform: scale(0.9); transition: transform 0.3s ease; max-height: 85vh; max-width: 90vw; }
        #lightbox-modal.open #lightbox-img { transform: scale(1); }

        /* Utilities */
        .fade-in-up { animation: fadeInUp 0.8s ease forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        ::selection { background: #00ffcc; color: #000; }
        
        /* Hide Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Helper for bottom-aligning paired image frames */
        .image-frame { display: flex; align-items: flex-end; justify-content: center; }
        .caption { flex-shrink: 0; }
        /* Uniform thumbnail class for Visual System images */
        .uniform-thumb { height: 220px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .final-note { text-align: center; font-style: italic; }
        .section-title {
            font-size: 1rem; /* md:text-sm / matches other headings */
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.25rem;
            padding-left: 0.75rem; /* to align with the left accent */
        }
            /* wrapper without green accent for inline titles */
            .section-title-wrap { padding-left: 0.75rem; }
        /* --- Project-specific visual tweaks --- */
        /* Per-project image transitions (no override of global transforms) */
        .project-module[data-project="project-oyster"] .project-img,
        .project-module[data-project="project-cat"] .project-img,
        .project-module[data-project="project-noah"] .project-img {
            transition: transform 0.25s ease;
        }
        /* Removed per-project translateY adjustments so title spacing is
           handled uniformly by .project-info padding/gap. */
            .subsection-title {
                font-size: 0.95rem;
                font-weight: 600;
                color: #ffffff;
                margin-bottom: 0.25rem;
                padding-left: 0.5rem;
            }
        /* About section grid and watermark */
        .about-grid { display: grid; grid-template-columns: 40% 60%; gap: 32px; align-items: center; max-width: 1100px; margin: 0 auto; }
        .about-portrait { overflow: hidden; display: block; border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
        .about-watermark { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); font-weight: 800; font-size: clamp(80px, 12vw, 220px); color: rgba(255,255,255,0.04); pointer-events: none; z-index: 2; white-space: nowrap; }
        .about-right { position: relative; z-index: 3; }
        .about-bio { max-width: 60ch; }
        .about-tools .tool-item { display: block; }
        @media (max-width: 900px) {
            .about-grid { grid-template-columns: 1fr; gap: 18px; padding: 0 18px; }
            .about-watermark { display: none; }
            .about-portrait { border-radius: 12px; }
        }
    </style>
</head>
    <body>

    <!-- Cursor Ripples -->
    <div id="cursor-ripples-container"></div>

    <!-- Global Brand -->
    <div id="global-brand" onclick="returnToHome()">YANG SIMIAO</div>

    <!-- Backgrounds -->
    <div id="bg-image"></div>
    <!-- background video removed (file missing) -->
    <video id="bg-site" autoplay loop muted playsinline style="position:fixed;inset:0;object-fit:cover;width:100%;height:100%;z-index:0;opacity:0.12;display:none;pointer-events:none;"></video>
    <!-- Project-level background image layer (shows per-project) -->
    <div id="project-bg" style="position:fixed;inset:0;z-index:2;pointer-events:none;display:none;">
        <div id="project-bg-inner" style="position:absolute;inset:0;background-position:center;background-size:cover;opacity:0.35;filter:brightness(0.9) saturate(0.9);"></div>
    </div>
    <div id="bg-overlay"></div>

    <div id="canvas-container">
        <canvas id="mainCanvas"></canvas>
    </div>

    <div id="footer-hint">将鼠标在年轮上停留，选择一个层<span id="active-layer-name"></span></div>

    <!-- SVG Filters -->
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <filter id="organic-distortion">
                <feTurbulence type="fractalNoise" baseFrequency="0.01" numOctaves="3" result="noise" seed="0">
                    <animate attributeName="baseFrequency" values="0.01;0.015;0.01" dur="10s" repeatCount="indefinite" />
                </feTurbulence>
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="5" xChannelSelector="R" yChannelSelector="G"></feDisplacementMap>
            </filter>
        </defs>
    </svg>

    <!-- Modal Overlay -->
    <div id="exhibition-modal" class="fixed inset-0 z-[70] hidden items-center justify-center bg-black/80 backdrop-blur-sm opacity-0">
        <div id="modal-content" class="bg-[#111] border border-gray-800 p-8 max-w-2xl w-full mx-4 relative shadow-2xl flex flex-col max-h-[90vh]">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white font-mono text-xl z-10">✕</button>
            
            <!-- Top: Info -->
            <div class="mb-6 flex-none">
                <h3 id="modal-title" class="text-xl md:text-2xl text-white font-bold mb-1"></h3>
                <div id="modal-meta" class="text-xs font-mono text-gray-500 mb-4 uppercase tracking-wider"></div>
                <div id="modal-role" class="text-sm font-mono text-gray-400 border-l-2 border-gray-700 pl-3 py-1 bg-gray-900/10 inline-block"></div>
            </div>

            <!-- Middle: Horizontal Scroll Images -->
            <div id="modal-images-container" class="flex-none w-full overflow-x-auto pb-4 mb-6 flex gap-4 no-scrollbar">
                <!-- Images injected via JS -->
            </div>
            
            <!-- Bottom: Description & Link -->
            <div class="flex-grow flex flex-col justify-end">
                <p id="modal-desc" class="text-gray-400 text-sm leading-relaxed mb-6 font-light border-t border-gray-800 pt-4"></p>
                <div class="flex justify-end">
                    <button id="modal-project-btn" class="text-white border border-gray-600 px-5 py-2 text-xs font-mono tracking-widest hover:bg-white hover:text-black transition hidden">VIEW PROJECT ↗</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Lightbox Overlay -->
    <div id="lightbox-modal" class="fixed inset-0 z-[80] hidden items-center justify-center bg-black/95 backdrop-blur-md opacity-0" onclick="closeLightbox()">
        <button class="absolute top-6 right-6 text-white/50 hover:text-white font-mono text-2xl z-10">✕</button>
        <div class="relative p-4 flex flex-col items-center">
            <div id="lightbox-img-container" class="relative">
                <div id="lightbox-placeholder" class="text-white font-mono border border-gray-700 p-20">IMAGE_VIEW</div>
            </div>
            <p id="lightbox-caption" class="text-gray-500 font-mono text-xs mt-4 tracking-widest uppercase"></p>
        </div>
    </div>

    <!-- 页面 1: PROJECTS -->
    <div id="page-projects" class="content-page">
        <!-- Content same as previous, hidden for brevity -->
        <div class="nav-bar">
            <div class="nav-links">
                <span style="color:#00ffcc">PROJECTS</span>
                <span onclick="navigateTo('exhibitions')">EXHIBITIONS</span>
                <span onclick="navigateTo('about')">ABOUT</span>
            </div>
        </div>
            <!-- Mobile nav toggle -->
            <button id="nav-toggle" aria-label="Open menu">☰</button>
            <div id="mobile-menu" role="dialog" aria-hidden="true">
                <div class="mobile-links">
                    <span onclick="navigateTo('projects'); toggleMobileMenu(false)">Projects</span>
                    <span onclick="navigateTo('exhibitions'); toggleMobileMenu(false)">Exhibitions</span>
                    <span onclick="navigateTo('about'); toggleMobileMenu(false)">About & Contact</span>
                </div>
            </div>
        <div class="max-w-6xl mx-auto px-6 py-20 min-h-screen flex flex-col items-center justify-center">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-20 gap-y-24 w-full">
                <!-- 01 Xiamen Oysters -->
                <div class="project-module module-hero group fade-in-up md:mt-24" data-project="project-oyster" style="animation-delay: 0.1s;" onclick="openProjectDetail('project-oyster')">
                    <div class="blob-wrapper">
                        <svg viewBox="0 0 500 400" class="w-full h-full overflow-visible">
                            <defs><clipPath id="clip-01"><path d="M430,280Q380,380,250,390Q120,400,60,290Q0,180,90,80Q180,-20,320,40Q460,100,430,280Z" /></clipPath></defs>
                            <image href="assets/images/XIAMEN OYSTER/牡蛎封面.JPG" clip-path="url(#clip-01)" width="100%" height="100%" preserveAspectRatio="xMidYMid meet" class="project-img" />
                            <path d="M430,280Q380,380,250,390Q120,400,60,290Q0,180,90,80Q180,-20,320,40Q460,100,430,280Z" class="contour-path contour-inner" style="transform: scale(1);" />
                            <path d="M430,280Q380,380,250,390Q120,400,60,290Q0,180,90,80Q180,-20,320,40Q460,100,430,280Z" class="contour-path contour-mid" style="transform: scale(1.04); opacity: 0.5;" />
                            <path d="M430,280Q380,380,250,390Q120,400,60,290Q0,180,90,80Q180,-20,320,40Q460,100,430,280Z" class="contour-path contour-outer" style="transform: scale(1.08); opacity: 0.3;" />
                        </svg>
                    </div>
                    <div class="project-info">
                        <h3 class="proj-title">XIAMEN OYSTERS</h3>
                        <div class="proj-meta">Interactive installation · 2024–2025</div>
                        <p class="proj-desc">A sensor-based installation that translates oyster ecology in Xiamen Bay into a breathing light and image landscape, revealing how pollution and climate change estrange oysters from their natural state.
                    </div>
                </div>
                <!-- 02 They Breathe Under the Table -->
                <div class="project-module module-hero group fade-in-up md:mt-24" data-project="project-table" style="animation-delay: 0.2s;" onclick="openProjectDetail('project-table')">
                    <div class="blob-wrapper">
                        <svg viewBox="0 0 500 400" class="w-full h-full overflow-visible">
                            <defs><clipPath id="clip-02"><path d="M410,310Q340,410,200,380Q60,350,40,220Q20,90,160,50Q300,10,420,100Q540,190,410,310Z" /></clipPath></defs>
                            <image href="assets/images/they breathe under the table/高保真.png" clip-path="url(#clip-02)" width="100%" height="100%" preserveAspectRatio="xMidYMid meet" class="project-img" />
                            <path d="M410,310Q340,410,200,380Q60,350,40,220Q20,90,160,50Q300,10,420,100Q540,190,410,310Z" class="contour-path contour-inner" style="transform: scale(1);" />
                            <path d="M410,310Q340,410,200,380Q60,350,40,220Q20,90,160,50Q300,10,420,100Q540,190,410,310Z" class="contour-path contour-mid" style="transform: scale(1.04); opacity: 0.5;" />
                            <path d="M410,310Q340,410,200,380Q60,350,40,220Q20,90,160,50Q300,10,420,100Q540,190,410,310Z" class="contour-path contour-outer" style="transform: scale(1.08); opacity: 0.3;" />
                        </svg>
                    </div>
                    <div class="project-info">
                        <h3 class="proj-title">THEY BREATHE UNDER THE TABLE</h3>
                        <div class="proj-meta">Interactive installation · 2025</div>
                        <p class="proj-desc">A small domestic installation where faint breath, light and sound reveal hidden emotional undercurrents under an ordinary table.
                    </div>
                </div>
                <!-- 03 Urban Stray Cat -->
                <div class="project-module module-hero group fade-in-up md:mt-24" data-project="project-cat" style="animation-delay: 0.3s;" onclick="openProjectDetail('project-cat')">
                    <div class="blob-wrapper">
                        <svg viewBox="0 0 500 400" class="w-full h-full overflow-visible">
                            <defs><clipPath id="clip-03"><path d="M450,250Q430,380,280,410Q130,440,60,320Q-10,200,80,90Q170,-20,330,30Q490,80,450,250Z" /></clipPath></defs>
                            <image href="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/渲染1.png" clip-path="url(#clip-03)" width="100%" height="100%" preserveAspectRatio="xMidYMid meet" class="project-img" />
                            <path d="M450,250Q430,380,280,410Q130,440,60,320Q-10,200,80,90Q170,-20,330,30Q490,80,450,250Z" class="contour-path contour-inner" style="transform: scale(1);" />
                            <path d="M450,250Q430,380,280,410Q130,440,60,320Q-10,200,80,90Q170,-20,330,30Q490,80,450,250Z" class="contour-path contour-mid" style="transform: scale(1.04); opacity: 0.5;" />
                            <path d="M450,250Q430,380,280,410Q130,440,60,320Q-10,200,80,90Q170,-20,330,30Q490,80,450,250Z" class="contour-path contour-outer" style="transform: scale(1.08); opacity: 0.3;" />
                        </svg>
                    </div>
                    <div class="project-info">
                        <h3 class="proj-title">URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM</h3>
                        <div class="proj-meta">Service & product system · 2025</div>
                        <p class="proj-desc">A speculative service system for real-time feeding, TNR management and gentle coexistence.
                    </div>
                </div>
                <!-- 04 TRACES -->
                <div class="project-module module-hero group fade-in-up md:mt-24" data-project="project-traces" style="animation-delay: 0.4s;" onclick="openProjectDetail('project-traces')">
                    <div class="blob-wrapper">
                        <svg viewBox="0 0 500 400" class="w-full h-full overflow-visible">
                            <defs><clipPath id="clip-04"><path d="M380,350Q280,420,150,360Q20,300,50,160Q80,20,220,40Q360,60,420,180Q480,300,380,350Z" /></clipPath></defs>
                            <image href="assets/images/trance/DSC03156.JPG" clip-path="url(#clip-04)" width="100%" height="100%" preserveAspectRatio="xMidYMid meet" class="project-img" />
                            <path d="M380,350Q280,420,150,360Q20,300,50,160Q80,20,220,40Q360,60,420,180Q480,300,380,350Z" class="contour-path contour-inner" style="transform: scale(1);" />
                            <path d="M380,350Q280,420,150,360Q20,300,50,160Q80,20,220,40Q360,60,420,180Q480,300,380,350Z" class="contour-path contour-mid" style="transform: scale(1.04); opacity: 0.5;" />
                            <path d="M380,350Q280,420,150,360Q20,300,50,160Q80,20,220,40Q360,60,420,180Q480,300,380,350Z" class="contour-path contour-outer" style="transform: scale(1.08); opacity: 0.3;" />
                        </svg>
                    </div>
                    <div class="project-info">
                        <h3 class="proj-title">TRACES</h3>
                        <div class="proj-meta">Interactive installation · 2024</div>
                        <p class="proj-desc">Waves, particles and erasing surfaces expose the fragile line between presence and disappearance.
                    </div>
                </div>
                <!-- 05 Chronicles of Time -->
                <div class="project-module module-hero group fade-in-up md:mt-24" data-project="project-chronicles" style="animation-delay: 0.5s;" onclick="openProjectDetail('project-chronicles')">
                    <div class="blob-wrapper">
                        <svg viewBox="0 0 500 400" class="w-full h-full overflow-visible">
                            <defs><clipPath id="clip-05"><path d="M420,280Q360,390,200,370Q60,350,40,200Q20,50,180,40Q340,30,440,120Q540,210,420,280Z" /></clipPath></defs>
                            <image href="assets/images/CHRONICLES OF TIME/封面.png" clip-path="url(#clip-05)" width="100%" height="100%" preserveAspectRatio="xMidYMid meet" class="project-img" />
                            <path d="M420,280Q360,390,200,370Q60,350,40,200Q20,50,180,40Q340,30,440,120Q540,210,420,280Z" class="contour-path contour-inner" style="transform: scale(1);" />
                            <path d="M420,280Q360,390,200,370Q60,350,40,200Q20,50,180,40Q340,30,440,120Q540,210,420,280Z" class="contour-path contour-mid" style="transform: scale(1.04); opacity: 0.5;" />
                            <path d="M420,280Q360,390,200,370Q60,350,40,200Q20,50,180,40Q340,30,440,120Q540,210,420,280Z" class="contour-path contour-outer" style="transform: scale(1.08); opacity: 0.3;" />
                        </svg>
                    </div>
                    <div class="project-info">
                        <h3 class="proj-title">CHRONICLES OF TIME</h3>
                        <div class="proj-meta">Interactive installation · 2023</div>
                        <p class="proj-desc">An interactive city-corner simulation where microplastic “particles” slowly erode a 3D landscape.
                    </div>
                </div>
                <!-- 06 Noah's Ark -->
                <div class="project-module module-hero group fade-in-up md:mt-24" data-project="project-noah" style="animation-delay: 0.6s;" onclick="openProjectDetail('project-noah')">
                    <div class="blob-wrapper">
                        <svg viewBox="0 0 500 400" class="w-full h-full overflow-visible">
                            <defs><clipPath id="clip-06"><path d="M460,220Q420,360,300,420Q170,440,60,320Q30,260,80,160Q150,90,300,80Q400,70,460,220Z" /></clipPath></defs>
                            <image href="assets/images/cover2.JPG" clip-path="url(#clip-06)" width="100%" height="100%" preserveAspectRatio="xMidYMid meet" class="project-img" />
                            <path d="M460,220Q420,360,300,420Q170,440,60,320Q30,260,80,160Q150,90,300,80Q400,70,460,220Z" class="contour-path contour-inner" style="transform: scale(1);" />
                            <path d="M460,220Q420,360,300,420Q170,440,60,320Q30,260,80,160Q150,90,300,80Q400,70,460,220Z" class="contour-path contour-mid" style="transform: scale(1.04); opacity: 0.5;" />
                            <path d="M460,220Q420,360,300,420Q170,440,60,320Q30,260,80,160Q150,90,300,80Q400,70,460,220Z" class="contour-path contour-outer" style="transform: scale(1.08); opacity: 0.3;" />
                        </svg>
                    </div>
                    <div class="project-info">
                        <h3 class="proj-title">OPEN_PARK What are in the Park</h3>
                        <div class="proj-meta">Noah's Ark (铜舟共济)</div>
                        <p class="proj-desc">A short documentary following shared journeys across water, tracing how boats, rivers and interviews weave a quiet portrait of human connection.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Project Detail Page Container -->
    <div id="page-project-detail" class="content-page bg-[#050505] z-50">
            <!-- project background video removed (file missing) -->
            <video id="bg-video-project-table" autoplay loop muted playsinline style="position:fixed;inset:0;object-fit:cover;width:100%;height:100%;z-index:1;opacity:0.28;pointer-events:none;display:none;"></video>
            <script>
            // Show background video only for 'They Breathe Under the Table' detail page
            function toggleProjectTableBgVideo(show) {
                const vid = document.getElementById('bg-video-project-table');
                const bgImg = document.getElementById('bg-image');
                const siteVid = document.getElementById('bg-site');
                if (siteVid) siteVid.style.display = 'none';
                if (!vid) return;
                if (show) {
                    vid.style.display = 'block';
                    // try to play (may be blocked if not muted, but video is muted)
                    try { vid.play(); } catch (e) {}
                    if (bgImg) bgImg.style.display = 'none';
                } else {
                    try { vid.pause(); vid.currentTime = 0; } catch (e) {}
                    vid.style.display = 'none';
                    if (bgImg) bgImg.style.display = 'block';
                }
            }
            // Hide on load
            document.addEventListener('DOMContentLoaded', () => toggleProjectTableBgVideo(false));
            </script>
            <script>
            // Ensure page scrolls to top on navigation and on refresh
            window.addEventListener('beforeunload', () => { window.scrollTo(0,0); });
            // Pause and reset all videos when navigating away or before reload
            function resetAllVideos() {
                document.querySelectorAll('video').forEach(v => {
                    try { v.pause(); v.currentTime = 0; } catch (e) {}
                });
            }
            // Unified animated page navigation
            function navigateWithAnimation(targetKey) {
                // Prevent no-op
                const targetId = 'page-' + targetKey;
                const current = document.querySelector('.content-page.active');
                if (current && current.id === targetId) return;

                resetAllVideos();
                window.scrollTo(0,0);
                appState = 'navigating';

                // Fade out current content and canvas
                if (current) {
                    current.style.transition = 'opacity 420ms ease, visibility 420ms ease';
                    current.style.opacity = '0';
                }
                container.style.transition = 'opacity 420ms ease'; container.style.opacity = '0';
                if (bgImage) { bgImage.style.transition = 'opacity 420ms ease'; bgImage.style.opacity = '0'; }
                if (bgOverlay) { bgOverlay.style.transition = 'opacity 420ms ease'; bgOverlay.style.opacity = '0'; }

                // hide any project-level background when switching pages
                try { hideProjectBg(); } catch (e) {}

                setTimeout(() => {
                    // Deactivate previous page
                    if (current) {
                        current.classList.remove('active');
                        // clear inline styles so CSS-controlled states resume
                        current.style.opacity = '';
                        current.style.transition = '';
                    }

                    // Activate target page
                    const target = document.getElementById(targetId);
                    if (target) {
                        target.classList.add('active');
                        // ensure it starts invisible so we can fade it in
                        target.style.opacity = '0';
                        // allow browser to layout then animate
                        setTimeout(() => {
                            target.style.transition = 'opacity 420ms ease';
                            target.style.opacity = '1';
                        }, 20);
                    }

                    // restore canvas and background visibility
                    container.style.opacity = '1';
                    if (bgImage) bgImage.style.opacity = '0.4';
                    if (bgOverlay) bgOverlay.style.opacity = '1';

                    // after the transition completes, resume app state
                    setTimeout(() => { appState = (targetKey === 'projects' ? 'home' : 'content');
                        // cleanup inline transitions
                        if (target) { target.style.transition = ''; }
                        container.style.transition = '';
                    }, 480);
                }, 460);
            }
            // expose as the global navigation handler
            window.navigateTo = navigateWithAnimation;

            // Project-level background control
            function showProjectBg(imageUrl) {
                const container = document.getElementById('project-bg');
                const inner = document.getElementById('project-bg-inner');
                if (!container || !inner) return;
                if (!imageUrl) { container.style.display = 'none'; inner.style.backgroundImage = ''; return; }
                inner.style.backgroundImage = `url('${imageUrl}')`;
                container.style.display = 'block';
            }
            function hideProjectBg() { showProjectBg(null); }

            // Modify openProjectDetail to accept project-level bg if provided in data
            const origOpenProjectDetail2 = window.openProjectDetail;
            window.openProjectDetail = function(id) {
                // reset videos and hide previous project bg
                resetAllVideos();
                hideProjectBg();
                // Ensure site-level background video is hidden by default
                const siteVid = document.getElementById('bg-site'); if (siteVid) siteVid.style.display = 'none';
                // if projectData has a bg property, show it
                const data = projectData[id] || {};
                if (data.bg) showProjectBg(data.bg);
                // toggle fermentation background video only for project-table
                if (id === 'project-table') {
                    toggleProjectTableBgVideo(true);
                } else {
                    toggleProjectTableBgVideo(false);
                }
                if (origOpenProjectDetail2) origOpenProjectDetail2(id);
            }
            // Also hide project bg when navigating home
            // ensure project background is hidden when navigating away from detail
            function navigateHideProjectBg(key) {
                if (key !== 'project-detail') hideProjectBg();
                if (typeof navigateWithAnimation === 'function') navigateWithAnimation(key);
                else window.location.hash = '#page-' + key;
            }
            window.navigateTo = navigateHideProjectBg;
            </script>
        <div class="nav-bar">
            <div class="nav-links">
                <span onclick="navigateTo('projects')" class="hover:text-emerald-400 transition-colors">← BACK TO PROJECTS
            </div>
        </div>
        <div class="max-w-4xl mx-auto px-6 py-20 fade-in-up">
            <div id="project-detail-content"></div>
        </div>
    </div>

    <!-- 页面 2: EXHIBITIONS -->
    <div id="page-exhibitions" class="content-page">
        <div class="nav-bar">
            <div class="nav-links">
                <span onclick="navigateTo('projects')">PROJECTS</span>
                <span class="text-emerald-400">EXHIBITIONS</span>
                <span onclick="navigateTo('about')">ABOUT</span>
            </div>
            <button id="timeline-global-toggle" aria-pressed="false" title="Toggle timeline" style="pointer-events:auto; position:absolute; right:24px; top:28px; z-index:50; background:transparent; border:1px solid rgba(255,255,255,0.04); padding:8px 10px; border-radius:6px; color:#00ffcc;">≡</button>
        </div>
        <div class="max-w-4xl mx-auto px-6 py-20">
            <h1 class="text-4xl font-light mb-20 tracking-widest text-center font-mono text-white">EXHIBITION TIMELINE</h1>
            <div class="relative border-l border-gray-700 ml-12 space-y-12 pl-0 timeline-container">
                <!-- 2025 -->
                <div class="timeline-year relative pb-8">
                    <span class="timeline-year-toggle absolute -left-10 -top-1 text-gray-500 font-mono text-2xl font-extrabold" role="button" aria-expanded="true">2025</span>
                    <div class="timeline-list space-y-8 pt-4 ml-0">
                        <div class="timeline-item pl-12 relative fade-in-up cursor-pointer hover:opacity-80 transition-opacity" onclick="openExhibitionModal('exh-1')">
                            <span class="timeline-dot absolute left-0 -translate-x-1/2 top-2 w-3 h-3"></span>
                            <span class="text-xs text-gray-500 mb-2 block font-mono tracking-wide">MAY–JUL 2025 · FUZHOU, CHINA</span>
                            <h3 class="text-lg text-white mb-2 font-semibold">"LOVE WAS THE PEARL OF HER OYSTER" Joint Exhibition</h3>
                            <p class="text-sm text-gray-400 font-mono mb-2">G Art Museum</p>
                            <div class="text-sm text-gray-300 mb-3 font-mono"><span class="text-emerald-400">Installation Artist</span> — "Xiamen Oysters"</div>
                            <div class="text-xs text-gray-500 hover:text-emerald-400 transition-colors font-mono cursor-pointer flex items-center gap-1" onclick="event.stopPropagation(); openProjectDetail('project-oyster')">
                                <span>→</span> <span>View project: Xiamen Oysters</span>
                            </div>
                        </div>
                        <div class="timeline-item pl-12 relative fade-in-up cursor-pointer hover:opacity-80 transition-opacity" onclick="openExhibitionModal('exh-2')">
                            <span class="timeline-dot absolute left-0 -translate-x-1/2 top-1 w-3 h-3"></span>
                            <span class="text-xs text-gray-500 mb-2 block font-mono tracking-wide">JAN–FEB 2025 · XIAMEN, CHINA</span>
                            <h3 class="text-lg text-white mb-2 font-semibold">XMAS – Xiamen Marine Environment Open Science Conference</h3>
                            <div class="text-xs text-gray-500 hover:text-emerald-400 transition-colors font-mono cursor-pointer flex items-center gap-1" onclick="event.stopPropagation(); openProjectDetail('project-oyster')">
                                <span>→</span> <span>View project: Xiamen Oysters</span>
                            </div>
                        </div>
                        <div class="timeline-item pl-12 relative fade-in-up cursor-pointer hover:opacity-80 transition-opacity" onclick="openExhibitionModal('exh-3')">
                            <span class="timeline-dot absolute left-0 -translate-x-1/2 top-1 w-3 h-3"></span>
                            <span class="text-xs text-gray-500 mb-2 block font-mono tracking-wide">17 NOV – 05 DEC 2025 · XIAMEN, CHINA</span>
                            <h3 class="text-lg text-white mb-2 font-semibold">OPEN_EXHIBITION – "Affect, Agency, and Attention"</h3>
                            <div class="text-sm text-gray-300 mb-3 font-mono"><span class="text-emerald-400">Co-creator</span> — "Noah's Ark (铜舟共济)"</div>
                        </div>
                    </div>
                </div>
                <!-- 2024 -->
                <div class="timeline-year relative pb-8">
                    <span class="timeline-year-toggle absolute -left-10 -top-1 text-gray-500 font-mono text-lg font-bold bg-[#050505] py-1 px-3 border border-gray-700 rounded" role="button" aria-expanded="true">2024</span>
                    <div class="timeline-list space-y-8 pt-4 ml-0">
                        <div class="timeline-item pl-12 relative fade-in-up cursor-pointer hover:opacity-80 transition-opacity" onclick="openExhibitionModal('exh-4')">
                            <span class="absolute left-0 -translate-x-1/2 top-1 w-3 h-3 bg-gray-600 rounded-full hover:bg-white transition-colors pointer-events-none"></span>
                            <span class="text-xs text-gray-500 mb-2 block font-mono tracking-wide">DEC 2024 · XIAMEN, CHINA</span>
                            <h3 class="text-lg text-white mb-2 font-semibold">12th XMU Marine Science Open Day</h3>
                            <div class="text-xs text-gray-500 hover:text-emerald-400 transition-colors font-mono cursor-pointer flex items-center gap-1" onclick="event.stopPropagation(); openProjectDetail('project-oyster')">
                                <span>→</span> <span>View project: Xiamen Oysters</span>
                            </div>
                        </div>
                        <div class="timeline-item pl-12 relative fade-in-up cursor-pointer hover:opacity-80 transition-opacity" onclick="openExhibitionModal('exh-5')">
                            <span class="absolute left-0 -translate-x-1/2 top-1 w-3 h-3 bg-gray-600 rounded-full hover:bg-white transition-colors pointer-events-none"></span>
                            <span class="text-xs text-gray-500 mb-2 block font-mono tracking-wide">21 OCT – 05 NOV 2024 · XIAMEN, CHINA</span>
                            <h3 class="text-lg text-white mb-2 font-semibold">OPEN_PARK – Emerging Curatorial Program E01</h3>
                            <div class="text-sm text-gray-300 mb-3 font-mono"><span class="text-emerald-400">Co-creator</span> — "What Are in the Park"</div>
                        </div>
                    </div>
                </div>
                <!-- 2023 -->
                <div class="timeline-year relative pb-8">
                    <span class="timeline-year-toggle absolute -left-10 -top-1 text-gray-500 font-mono text-lg font-bold bg-[#050505] py-1 px-3 border border-gray-700 rounded" role="button" aria-expanded="true">2023</span>
                    <div class="timeline-list space-y-8 pt-4 ml-0">
                        <div class="timeline-item pl-12 relative fade-in-up cursor-pointer hover:opacity-80 transition-opacity" onclick="openExhibitionModal('exh-6')">
                            <span class="absolute left-0 -translate-x-1/2 top-1 w-3 h-3 bg-gray-600 rounded-full hover:bg-white transition-colors pointer-events-none"></span>
                            <span class="text-xs text-gray-500 mb-2 block font-mono tracking-wide">13–16 NOV 2023 · BALI, INDONESIA</span>
                            <h3 class="text-lg text-white mb-2 font-semibold">Chinese CHI 2023 – Art Exhibition</h3>
                            <div class="text-sm text-gray-300 mb-3 font-mono"><span class="text-emerald-400">Co-creator</span> — "Chronicles of Time"</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 页面 3: ABOUT (Vertical Editorial Flow) -->
    <div id="page-about" class="content-page">
        <div class="nav-bar">
            <div class="nav-links">
                <span onclick="navigateTo('projects')">PROJECTS</span>
                <span onclick="navigateTo('exhibitions')">EXHIBITIONS</span>
                <span style="color:#00ffcc">ABOUT</span>
            </div>
        </div>

        <main class="page-editorial max-w-4xl mx-auto px-6 py-20 text-left">
            <!-- Header: Name as elegant serif title -->
                <!-- top hero title removed to avoid duplication; left sticky name retained -->

            <!-- Global two-column About layout -->
            <section class="about-global">
                <!-- LEFT: Identity column (sticky) -->
                <div class="about-left" style="position:relative;">
                    <div class="about-left-inner" style="position:sticky; top:100px;">
                        <h1 class="editorial-title" style="font-weight:900 !important; font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif !important; font-size:4rem !important; line-height:1 !important; text-align:left; margin:0 0 20px 0;">YANG SIMIAO</h1>
                        <div class="about-portrait-wrapper" style="max-width:360px;">
                            <div class="portrait-mask relative overflow-visible">
                                <div class="portrait-inner">
                                    <svg viewBox="0 0 300 400" class="w-full h-full" preserveAspectRatio="xMidYMid meet">
                                        <defs>
                                            <clipPath id="clip-about">
                                                <!-- full-viewport rect: effectively disables cropping (3:4) -->
                                                <rect x="0" y="0" width="300" height="400" />
                                            </clipPath>
                                        </defs>
                                        <g id="about-contours" clip-path="url(#clip-about)">
                                            <image href="assets/images/简介.jpg" x="0" y="0" width="300" height="400" preserveAspectRatio="xMidYMid meet" class="about-svg-image" onclick="openLightbox('assets/images/简介.jpg')" />
                                            <!-- Static silhouette fallback (visible before JS runs) -->
                                            <path class="about-silhouette" d="M150 10 C 210 18, 260 48, 270 110 C 290 170, 290 240, 270 300 C 245 348, 200 380, 150 380 C 110 380, 70 348, 50 300 C 30 238, 30 170, 50 110 C 60 50, 90 22, 150 10 Z" />
                                            <!-- denser concentric wavy rings (tree-ring inspired) -->
                                            <path d="M50 60 C 140 30, 360 30, 450 60 C 480 130, 480 270, 450 340 C 360 370, 140 370, 50 340 C 20 270, 20 130, 50 60 Z" class="contour-path about-contour" />
                                            <path d="M52 66 C 142 38, 358 34, 448 66 C 478 132, 478 268, 448 334 C 358 366, 142 364, 52 334 C 22 268, 22 132, 52 66 Z" class="contour-path about-contour" />
                                            <path d="M54 72 C 144 44, 356 38, 446 72 C 476 134, 476 262, 446 326 C 356 358, 144 358, 54 326 C 24 262, 24 134, 54 72 Z" class="contour-path about-contour" />
                                            <path d="M56 78 C 146 50, 354 44, 444 78 C 474 136, 474 256, 444 318 C 354 350, 146 352, 56 318 C 26 256, 26 136, 56 78 Z" class="contour-path about-contour" />
                                            <path d="M58 84 C 148 56, 352 50, 442 84 C 472 138, 472 250, 442 310 C 352 342, 148 346, 58 310 C 28 250, 28 138, 58 84 Z" class="contour-path about-contour" />
                                            <path d="M60 90 C 150 62, 350 56, 440 90 C 470 140, 470 244, 440 302 C 350 334, 150 340, 60 302 C 30 244, 30 140, 60 90 Z" class="contour-path about-contour" />
                                            <path d="M62 96 C 152 68, 348 62, 438 96 C 468 142, 468 238, 438 294 C 348 326, 152 334, 62 294 C 32 238, 32 142, 62 96 Z" class="contour-path about-contour" />
                                            <path d="M64 102 C 154 74, 346 68, 436 102 C 466 144, 466 232, 436 286 C 346 318, 154 328, 64 286 C 34 232, 34 144, 64 102 Z" class="contour-path about-contour" />
                                            <path d="M66 108 C 156 80, 344 74, 434 108 C 464 146, 464 226, 434 278 C 344 310, 156 322, 66 278 C 36 226, 36 146, 66 108 Z" class="contour-path about-contour" />
                                            <path d="M68 114 C 158 86, 342 80, 432 114 C 462 148, 462 220, 432 270 C 342 302, 158 316, 68 270 C 38 220, 38 148, 68 114 Z" class="contour-path about-contour" />
                                            <path d="M70 120 C 160 92, 340 86, 430 120 C 460 150, 460 214, 430 262 C 340 294, 160 310, 70 262 C 40 214, 40 150, 70 120 Z" class="contour-path about-contour" />
                                        </g>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RIGHT: Narrative column -->
                <div class="about-right" style="padding-right:40px;">
                    <div class="editorial-text" style="max-width:64ch;">
                        <p class="lead text-gray-300 mb-6" style="font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif !important; font-size:1.1rem !important; line-height:1.7 !important; color:#cccccc !important;"><span class="dropcap">My</span> practice is grounded at the intersection of ecology, technology, and emotion. I often draw inspiration from overlooked life forms, whose bodies record time like tree rings—concentric traces of growth, injury, and repair rippling outward. The visual resonance between the textures of oyster shells and the diffusive patterns of tree rings serves as my consistent visual language and mode of thinking.</p>

                        <p class="text-gray-400 mb-4" style="font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif !important; font-size:1.1rem !important; line-height:1.7 !important; color:#cccccc !important;">In practice, I weave together interactive installations, service design, and digital technologies—such as sensors, generative imagery, and data visualization—to construct spaces that invite people to slow down and re-perceive the world through touch, sound, and smell. I explore how subtle bodily movements serve as pathways to process anxiety, grief, and care, and how these emotions sediment, layer by layer, into our daily lives like annual rings.</p>

                        <p class="text-gray-400" style="font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif !important; font-size:1.1rem !important; line-height:1.7 !important; color:#cccccc !important;">For me, design is not about providing a single answer, but opening a path: an invitation to step out toward nature and the "Other," re-negotiating our relationship with the world through constant encounters. Just as every new ring quietly reshapes the contour of a tree, an oyster shell, or a human life.</p>

                        <!-- footer meta removed per request -->
                    </div>
                </div>
            </section>

            <!-- Divider and Details Grid -->
            <div class="editorial-divider my-14" aria-hidden="true"></div>

            <footer class="editorial-details text-sm text-gray-300 mt-6">
                <div class="project-meta max-w-4xl mx-auto">
                    <div class="meta-item">
                        <div class="meta-label">FOCUS</div>
                        <div class="meta-value">Interactive installations · Ecological & sensory storytelling · Service & system design</div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">CURRENT</div>
                        <div class="meta-value"><a href="https://ici.xmu.edu.cn/en/about/About_ICI.htm" target="_blank" rel="noopener noreferrer" style="color:inherit; text-decoration:underline;">Institute for Creativity and Innovation (XMU & UCA)</a>
                            <div class="meta-value alt" style="margin-top:8px; font-size:0.9rem; font-family: 'Inter', Arial, sans-serif; color:#9aa0a6;">BA (Hons) Digital Media Arts, Xiamen University · BA (Hons) Digital Media Arts, University for the Creative Arts</div>
                        </div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">TOOLS</div>
                        <div class="meta-value">
                            <div style="display:flex; gap:2.5rem; flex-wrap:wrap; align-items:center;">
                                <span>TouchDesigner</span>
                                <span>p5.js</span>
                                <span>Arduino</span>
                                <span>Figma</span>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </main>

    <!-- Dev nudger: only visible when ?dev=1 is in the URL -->
    <div id="about-dev-nudger" style="display:none; position:fixed; right:18px; bottom:18px; width:320px; background:rgba(10,10,10,0.9); color:#ddd; padding:12px; border-radius:8px; z-index:200; font-family: Inter, Arial, sans-serif; font-size:13px;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"><strong>About Nudger</strong><button id="nudger-close" style="background:transparent;border:0;color:#9ff;font-weight:700;cursor:pointer">Close</button></div>
        <label style="display:block;margin-top:6px">X <span id="val-x" style="float:right">6%</span></label>
        <input id="nudger-x" type="range" min="-30" max="30" value="6" style="width:100%">
        <label style="display:block;margin-top:8px">Y <span id="val-y" style="float:right">6%</span></label>
        <input id="nudger-y" type="range" min="-30" max="30" value="6" style="width:100%">
        <label style="display:block;margin-top:8px">Width (%) <span id="val-w" style="float:right">88%</span></label>
        <input id="nudger-w" type="range" min="60" max="140" value="88" style="width:100%">
        <label style="display:block;margin-top:8px">Contour scale <span id="val-c" style="float:right">1.00</span></label>
        <input id="nudger-c" type="range" min="80" max="120" value="100" style="width:100%">
        <label style="display:block;margin-top:8px">Hover effect <span id="val-h" style="float:right">on</span></label>
        <select id="nudger-h" style="width:100%;margin-top:6px;background:#111;color:#ddd;border:1px solid #222;padding:6px">
            <option value="on">on</option>
            <option value="off">off</option>
        </select>
        <div style="display:flex;gap:8px;margin-top:10px"><button id="nudger-apply" style="flex:1;background:#0f766e;border:0;padding:8px;border-radius:6px;color:#fff">Apply</button><button id="nudger-reset" style="flex:1;background:#222;border:0;padding:8px;border-radius:6px;color:#fff">Reset</button></div>
        <div style="opacity:0.6;font-size:11px;margin-top:8px">Visible only when <code>?dev=1</code> in the URL. Use sliders and click Apply; when satisfied tell me and I'll persist values into the file.</div>
    </div>
    </div>

    <script>
        // Timeline year collapse: delegated handlers so it works on every page
        function updateTimelineInitialState(expandAll = true) {
            // If expandAll is true, ensure all years are expanded on load
            document.querySelectorAll('.timeline-year').forEach(yearBlock => {
                const toggle = yearBlock.querySelector('.timeline-year-toggle');
                if (!toggle) return;
                if (!expandAll && window.innerWidth <= 900) {
                    yearBlock.classList.add('collapsed');
                    toggle.setAttribute('aria-expanded', 'false');
                } else {
                    yearBlock.classList.remove('collapsed');
                    toggle.setAttribute('aria-expanded', 'true');
                }
            });
        }

        // Delegated click handler: works for elements added later and on any page
        document.addEventListener('click', (e) => {
            const t = e.target.closest && e.target.closest('.timeline-year-toggle');
            if (!t) return;
            const yearBlock = t.closest('.timeline-year');
            if (!yearBlock) return;
            // Toggle collapsed state
            yearBlock.classList.toggle('collapsed');
            const expanded = !yearBlock.classList.contains('collapsed');
            t.setAttribute('aria-expanded', expanded);

            // Smooth scroll the year into view with slight downward offset
            const rect = yearBlock.getBoundingClientRect();
            const absoluteTop = window.scrollY + rect.top - 80; // offset to move content down a bit
            window.scrollTo({ left: 0, top: absoluteTop, behavior: 'smooth' });
        });

        // Keyboard access: Enter or Space on focused toggle
        document.addEventListener('keydown', (e) => {
            const t = document.activeElement && document.activeElement.classList && document.activeElement.classList.contains('timeline-year-toggle') ? document.activeElement : null;
            if (!t) return;
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                t.click();
            }
        });

        // Initialize on load and update on resize
        document.addEventListener('DOMContentLoaded', () => {
            // Prepare animation: force all years to collapsed state, then remove collapsed with stagger
            const years = Array.from(document.querySelectorAll('.timeline-year'));
            if (years.length) {
                years.forEach(y => y.classList.add('collapsed'));
                // Force reflow so transitions will run
                void document.body.offsetHeight;
                years.forEach((y, i) => {
                    setTimeout(() => {
                        y.classList.remove('collapsed');
                        const toggle = y.querySelector('.timeline-year-toggle');
                        if (toggle) toggle.setAttribute('aria-expanded', 'true');
                    }, 220 + i * 160);
                });
            }

            // Ensure global toggle works everywhere
            const globalToggle = document.getElementById('timeline-global-toggle');
            if (globalToggle) {
                globalToggle.addEventListener('click', () => {
                    const yearsNow = Array.from(document.querySelectorAll('.timeline-year'));
                    const anyCollapsed = yearsNow.some(y => y.classList.contains('collapsed'));
                    yearsNow.forEach(y => {
                        const toggle = y.querySelector('.timeline-year-toggle');
                        if (!toggle) return;
                        if (anyCollapsed) { y.classList.remove('collapsed'); toggle.setAttribute('aria-expanded', 'true'); }
                        else { y.classList.add('collapsed'); toggle.setAttribute('aria-expanded', 'false'); }
                    });
                    globalToggle.setAttribute('aria-pressed', (!anyCollapsed).toString());
                });
            }
        });
        window.addEventListener('resize', updateTimelineInitialState);

        // Ensure timeline auto-open runs whenever the Exhibitions page becomes active
        (function watchExhibitionsActivation(){
            const exhibitionsPage = document.getElementById('page-exhibitions');
            if (!exhibitionsPage) return;
            const runExpand = () => {
                // Re-run the same staggered expand used on initial load
                const years = Array.from(document.querySelectorAll('.timeline-year'));
                if (!years.length) return;
                years.forEach(y => y.classList.add('collapsed'));
                void document.body.offsetHeight;
                years.forEach((y, i) => {
                    setTimeout(() => { y.classList.remove('collapsed'); const toggle = y.querySelector('.timeline-year-toggle'); if (toggle) toggle.setAttribute('aria-expanded', 'true'); }, 220 + i * 160);
                });
            };

            // If the page already has active class on load, run immediately
            if (exhibitionsPage.classList.contains('active')) runExpand();

            // Observe class changes to trigger when it becomes active later
            const mo = new MutationObserver(muts => {
                for (const m of muts) {
                    if (m.attributeName === 'class') {
                        if (exhibitionsPage.classList.contains('active')) {
                            runExpand();
                        }
                    }
                }
            });
            mo.observe(exhibitionsPage, { attributes: true });
        })();

        // Portrait interactive rings: subtle follow on pointer move (project-like interaction)
        function initPortraitInteraction() {
            // No-op: pointer ripple and extra overlays disabled to keep a single, clean SVG clip + contour effect.
            return;
        }
        document.addEventListener('DOMContentLoaded', initPortraitInteraction);

        // (Removed JS-driven ripple pulse — replaced with CSS ::before/::after animations)
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        const footerHint = document.getElementById('footer-hint');
        const activeLayerNameSpan = document.getElementById('active-layer-name');
        const container = document.getElementById('canvas-container');
        const bgImage = document.getElementById('bg-image');
        const bgOverlay = document.getElementById('bg-overlay');

        let width, height, centerX, centerY;
        let scaleFactor = 1; 
        let targetScaleFactor = 1; // used for smooth transitions when resizing
        let mouseX = -1000, mouseY = -1000;
        let appState = 'home';
        const dpr = window.devicePixelRatio || 1;

        // Custom Cursor Logic
        const cursorRippleContainer = document.getElementById('cursor-ripples-container');
        function spawnCursorRipple(x, y) {
            const ripple = document.createElement('div');
            ripple.classList.add('cursor-ripple');
            ripple.style.left = `${x}px`; ripple.style.top = `${y}px`;
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 1000);
        }

        // Dev nudger: show when ?dev=1
        (function(){
            function qs(name){ return new URLSearchParams(location.search).get(name); }
            if (qs('dev') !== '1') return;
            const nudger = document.getElementById('about-dev-nudger'); if (!nudger) return; nudger.style.display = 'block';
            const img = document.querySelector('#page-about .portrait-mask svg image');
            const inner = document.querySelector('#page-about .portrait-mask svg');
            const contours = document.querySelectorAll('#page-about .portrait-mask svg .contour-path');
            const byId = id => document.getElementById(id);
            const setVals = ()=>{
                byId('val-x').textContent = byId('nudger-x').value + '%';
                byId('val-y').textContent = byId('nudger-y').value + '%';
                byId('val-w').textContent = byId('nudger-w').value + '%';
                byId('val-c').textContent = (byId('nudger-c').value/100).toFixed(2);
                byId('val-h').textContent = byId('nudger-h').value;
            };
            ['nudger-x','nudger-y','nudger-w','nudger-c','nudger-h'].forEach(id=>{byId(id).addEventListener('input', setVals);});
            byId('nudger-reset').addEventListener('click', ()=>{
                byId('nudger-x').value = 6; byId('nudger-y').value = 6; byId('nudger-w').value = 88; byId('nudger-c').value = 100; byId('nudger-h').value='on'; setVals(); apply();
            });
            byId('nudger-close').addEventListener('click', ()=>{ nudger.style.display='none'; });
            function apply(){
                if (!img) return;
                const x = byId('nudger-x').value + '%';
                const y = byId('nudger-y').value + '%';
                const w = byId('nudger-w').value + '%';
                img.setAttribute('x', x); img.setAttribute('y', y); img.setAttribute('width', w); img.setAttribute('height', w);
                const scale = byId('nudger-c').value/100;
                contours.forEach((el,i)=>{ el.style.transform = `scale(${1 + (i*0.02) * scale})`; });
                if (byId('nudger-h').value === 'off') {
                    img.classList.add('no-hover');
                } else img.classList.remove('no-hover');
            }
            byId('nudger-apply').addEventListener('click', apply);
            setVals(); apply();
        })();
        window.addEventListener('mousedown', (e) => spawnCursorRipple(e.clientX, e.clientY));

        // --- Data ---
        const projectData = {
            'project-cat': {
                bg: 'assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/蓝图.png',
                title: 'Urban Stray Cat Rescue and Management System',
                subtitle: 'Service & product system · 2025',
                exhibitions: [],
                images: ['assets/images/placeholder-project.svg'],
                videos: [],
                content: `
                    <!-- Header: intro + unified meta module -->
                    <div class="mb-20 border-b border-gray-900 pb-12">
                        <div class="max-w-4xl mx-auto mb-4">
                            <p class="text-gray-300 font-light text-sm md:text-base leading-relaxed">A low-burden rescue system linking live-stream feeders, mobile shelters and TNR data to support gentle coexistence between people, cats and the city.</p>
                        </div>

                        <div class="project-meta">
                            <div class="meta-item">
                                <div class="meta-label">TYPE</div>
                                <div class="meta-value">Service & product system</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">ROLE</div>
                                <div class="meta-value">Service system design, UI & product</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">TOOLS</div>
                                <div class="meta-value">Figma, Blender, Photoshop</div>
                            </div>
                        </div>
                    </div>

                    <!-- Block A: System Overview -->
                    <section class="mb-24">
                        <h3 class="text-lg text-white font-bold mb-8 border-l-2 border-emerald-500 pl-3">System Overview</h3>
                        <!-- Blueprint (16:9) -->
                        <div class="max-w-6xl mx-auto mb-6">
                            <div class="aspect-[16/9] bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in blueprint-hero" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/蓝图.png')">
                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/蓝图.png" alt="Service blueprint" class="w-full h-full object-cover" />
                                <div class="hero-overlay"></div>
                            </div>
                        </div>
                        <div class="max-w-4xl mx-auto space-y-2">
                            <p class="text-gray-600 text-xs font-mono">Service blueprint – relationships between cats, feeders, volunteers, communities and clinics.</p>
                            <p class="text-gray-400 text-sm">A TNR data platform shared by volunteers, communities and clinics. Together, they turn individual acts of feeding into a coordinated, data-informed rescue effort.</p>
                        </div>
                        
                    </section>

                    <!-- Block B: Product System -->
                    <section class="mb-24">
                        <h3 class="text-lg text-white font-bold mb-6 border-l-2 border-emerald-500 pl-3">Product System – Mobile Shelter</h3>

                        <!-- Two-column: left column stacks intro + full image; right column shows exploded image. Captions are placed under images. -->
                        <!-- Use items-end so the image frames align to the bottom; wrap text+caption so captions remain below images. -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12 items-end">
                            <!-- Left column: intro above full image (left-aligned) -->
                            <div class="space-y-3 flex flex-col">
                                <div class="text-left">
                                    <p class="text-gray-300 font-light text-sm md:text-base leading-relaxed">
                                        The physical system consists of a detachable cat cabin, a mobile base and a monitoring module, designed for safe trapping, temporary care and remote observation of stray cats.
                                    </p>
                                </div>
                                <div class="w-full bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/24.png')">
                                    <div class="aspect-[4/3] w-full flex items-center justify-center overflow-hidden image-frame">
                                        <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/24.png" alt="Full view" class="w-full h-full object-cover" />
                                    </div>
                                </div>
                                <p class="text-gray-600 text-xs font-mono text-left mt-2 caption">Full assembled view</p>
                            </div>

                            <!-- Right column: exploded portrait with caption below -->
                            <div class="space-y-3 flex flex-col">
                                <div class="bg-gray-900 border border-gray-800 cursor-zoom-in flex items-center justify-center text-gray-700 font-mono text-xs overflow-hidden group" onclick="openLightbox('EXPLODED_VIEW')">
                                    <div class="aspect-[3/4] w-full flex items-center justify-center overflow-hidden image-frame">
                                        <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/爆炸图.png" alt="Exploded view" class="w-full h-full object-cover" />
                                    </div>
                                </div>
                                <p class="text-gray-600 text-xs font-mono text-left mt-2 caption">Exploded structural view</p>
                            </div>
                        </div>

                        <!-- Cabin & Base below images -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 mb-12 items-start">
                            <!-- Cabin -->
                            <div class="space-y-4">
                                <div class="aspect-square bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden cursor-zoom-in group" onclick="openLightbox('CABIN_RENDER')">
                                    <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/分层1.jpg" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity" />
                                </div>
                                <div>
                                    <h4 class="text-white font-bold text-sm mb-2">Detachable Cat Cabin</h4>
                                    <p class="text-gray-500 text-xs font-mono leading-relaxed">
                                        Safe trapping & temporary shelter
                                        Ventilated transparent windows to reduce stress
                                        Pull-out litter tray for quick cleaning
                                        Integrated camera for remote monitoring</p>
                                </div>
                            </div>

                            <!-- Base -->
                            <div class="space-y-4">
                                <div class="aspect-square bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden cursor-zoom-in group" onclick="openLightbox('BASE_RENDER')">
                                    <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/1.png" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity" style="object-position:60% 50%;" />
                                </div>
                                <div>
                                    <h4 class="text-white font-bold text-sm mb-2">Mobile Base</h4>
                                    <p class="text-gray-500 text-xs font-mono leading-relaxed">
                                        All-terrain wheels for moving between feeding spots
                                        Power & battery module for long-term outdoor use
                                        Space for food storage and sensor wiring</p>
                                </div>
                            </div>
                        </div>
                        <!-- Demo Video removed per request -->
                    </section>

                    <!-- Block C: Digital Platform (Redesigned) -->
                    <section class="mb-24">
                        <!-- 1. Header -->
                        <div class="mb-8 border-l-2 border-emerald-500 pl-3">
                            <h3 class="text-lg text-white font-bold mb-1">Digital Platform</h3>
                            <p class="text-gray-400 font-light text-sm">Companion app connecting feeders, volunteers and shelters in real time.
                        </div>

                        <!-- 2. Hero Render (Wide) -->
                        <div class="mb-16 space-y-3">
                                <div class="aspect-[21/9] bg-black border border-gray-800 cursor-zoom-in flex items-center justify-center overflow-hidden group relative" onclick="openLightbox('APP_HERO_RENDER')">
                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/群图1.png" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity" />
                            </div>
                            <p class="text-gray-600 text-xs font-mono">Overall view – mobile shelter linked with the companion app.</p>
                        </div>

                        <!-- 3. App Screens Strip -->
                        <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
                            <!-- Title & Hint -->
                               <div class="md:col-span-2 flex flex-col justify-between h-full pt-2">
                                   <div class="section-title-wrap">
                                      <h2 class="section-title">App Screens</h2>
                                   </div>
                                   <p class="text-gray-600 text-[10px] font-mono hidden md:block">Drag to explore →</p>
                               </div>
                            
                            <!-- Scroll Container -->
                            <div class="md:col-span-10">
                                <div class="w-full overflow-x-auto pb-4 flex gap-6 no-scrollbar cursor-grab active:cursor-grabbing">
                                    <!-- Screen 1: Landing (image swapped) -->
                                    <div class="flex-none w-40 flex flex-col gap-3 group">
                                        <div class="aspect-[375/812] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/导入页@3x.jpg')">
                                             <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/导入页@3x.jpg" class="w-full h-full object-cover" />
                                        </div>
                                        <p class="text-gray-500 text-[10px] font-mono leading-tight border-t border-gray-800 pt-2 text-center">Landing</p>
                                    </div>
                                    <!-- Screen 1.5: Login (new, right of Landing) -->
                                    <div class="flex-none w-40 flex flex-col gap-3 group">
                                        <div class="aspect-[375/812] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/登陆页@3x.jpg')">
                                             <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/登陆页@3x.jpg" class="w-full h-full object-cover" />
                                        </div>
                                        <p class="text-gray-500 text-[10px] font-mono leading-tight border-t border-gray-800 pt-2 text-center">Landing</p>
                                    </div>
                                    <!-- Screen 2: Home (image swapped) -->
                                    <div class="flex-none w-40 flex flex-col gap-3 group">
                                        <div class="aspect-[375/812] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/直播-待办任务@3x.jpg')">
                                             <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/直播-待办任务@3x.jpg" class="w-full h-full object-cover" />
                                        </div>
                                        <p class="text-gray-500 text-[10px] font-mono leading-tight border-t border-gray-800 pt-2 text-center">Home</p>
                                    </div>
                                    <!-- Screen 3: Live (was Status) -->
                                    <div class="flex-none w-40 flex flex-col gap-3 group">
                                        <div class="aspect-[375/812] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/直播@3x.jpg')">
                                             <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/直播@3x.jpg" class="w-full h-full object-cover" />
                                        </div>
                                        <p class="text-gray-500 text-[10px] font-mono leading-tight border-t border-gray-800 pt-2 text-center">Live</p>
                                    </div>
                                    <!-- Screen 4: Community -->
                                    <div class="flex-none w-40 flex flex-col gap-3 group">
                                        <div class="aspect-[375/812] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/社区@3x.jpg')">
                                             <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/社区@3x.jpg" class="w-full h-full object-cover" />
                                        </div>
                                        <p class="text-gray-500 text-[10px] font-mono leading-tight border-t border-gray-800 pt-2 text-center">Community</p>
                                    </div>
                                    <!-- Screen 5: Live Feed (was Dashboard) -->
                                    <div class="flex-none w-40 flex flex-col gap-3 group">
                                        <div class="aspect-[375/812] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/直播中@3x.jpg')">
                                             <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/直播中@3x.jpg" class="w-full h-full object-cover" />
                                        </div>
                                        <p class="text-gray-500 text-[10px] font-mono leading-tight border-t border-gray-800 pt-2 text-center">Live Feed</p>
                                    </div>
                                    <!-- Screen 6: Profile (new) -->
                                    <div class="flex-none w-40 flex flex-col gap-3 group">
                                        <div class="aspect-[375/812] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/我的@3x.jpg')">
                                             <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/app UI/我的@3x.jpg" class="w-full h-full object-cover" />
                                        </div>
                                        <p class="text-gray-500 text-[10px] font-mono leading-tight border-t border-gray-800 pt-2 text-center">Profile</p>
                                    </div>
                                </div>
                                <p class="text-gray-500 text-[10px] font-mono md:hidden mt-2">Drag to explore →</p>
                            </div>

                        <!-- B-side Screen -->
                                <div class="md:col-span-2 flex flex-col justify-between h-full pt-2">
                                     <div class="mb-8 section-title-wrap pl-0">
                                         <h3 class="subsection-title">B-side Screen</h3>
                                     </div>
                                </div>
                                <div class="md:col-span-10">
                                    <div class="w-full overflow-x-auto pb-4 flex gap-6 no-scrollbar items-start">
                                        <!-- Login -->
                                        <div class="flex-none w-[280px] flex flex-col gap-2 group">
                                            <div class="aspect-[233/160] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/登录.jpg')">
                                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/登录.jpg" class="w-full h-full object-cover" />
                                            </div>
                                            <p class="text-gray-500 text-[10px] font-mono leading-tight text-center">Login</p>
                                        </div>
                                        <!-- Data Dashboard -->
                                        <div class="flex-none w-[280px] flex flex-col gap-2 group">
                                            <div class="aspect-[233/160] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/数据看板.jpg')">
                                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/数据看板.jpg" class="w-full h-full object-cover" />
                                            </div>
                                            <p class="text-gray-500 text-[10px] font-mono leading-tight text-center">Data Dashboard</p>
                                        </div>
                                        <!-- Live -->
                                        <div class="flex-none w-[280px] flex flex-col gap-2 group">
                                            <div class="aspect-[233/160] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播.jpg')">
                                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播.jpg" class="w-full h-full object-cover" />
                                            </div>
                                            <p class="text-gray-500 text-[10px] font-mono leading-tight text-center">Live</p>
                                        </div>
                                        <!-- Live Backup 2 -->
                                        <div class="flex-none w-[280px] flex flex-col gap-2 group">
                                            <div class="aspect-[233/160] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%202.jpg')">
                                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%202.jpg" class="w-full h-full object-cover" />
                                            </div>
                                            <p class="text-gray-500 text-[10px] font-mono leading-tight text-center">Live Backup 2</p>
                                        </div>
                                        <!-- Live Backup 3 -->
                                        <div class="flex-none w-[280px] flex flex-col gap-2 group">
                                            <div class="aspect-[233/160] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%203.jpg')">
                                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%203.jpg" class="w-full h-full object-cover" />
                                            </div>
                                            <p class="text-gray-500 text-[10px] font-mono leading-tight text-center">Live Backup 3</p>
                                        </div>
                                        <!-- Live Backup 4 -->
                                        <div class="flex-none w-[280px] flex flex-col gap-2 group">
                                            <div class="aspect-[233/160] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%204.jpg')">
                                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%204.jpg" class="w-full h-full object-cover" />
                                            </div>
                                            <p class="text-gray-500 text-[10px] font-mono leading-tight text-center">Live Backup 4</p>
                                        </div>
                                        <!-- Live Backup 5 -->
                                        <div class="flex-none w-[280px] flex flex-col gap-2 group">
                                            <div class="aspect-[233/160] bg-gray-900 border border-gray-800 rounded-md overflow-hidden relative cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%205.jpg')">
                                                <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/B端UI/直播备份%205.jpg" class="w-full h-full object-cover" />
                                            </div>
                                            <p class="text-gray-500 text-[10px] font-mono leading-tight text-center">Live Backup 5</p>
                                        </div>
                                    </div>
                                    <p class="text-gray-400 text-[10px] font-mono mt-2">Browse B-side assets →</p>
                                </div>

                            </div>
                        </div>
                    </section>

                    <!-- Block D: Rendering -->
                    <section class="mb-16">
                        <h3 class="text-lg text-white font-bold mb-8 border-l-2 border-emerald-500 pl-3">Rendering</h3>
                        <div class="mb-8">
                            <div class="w-full bg-gray-900 border border-gray-800 p-1 cursor-zoom-in" onclick="openLightbox('assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/组图1.png')">
                                <div class="aspect-[1118/595] w-full flex items-center justify-center overflow-hidden">
                                    <img src="assets/images/URBAN STRAY CAT RESCUE AND MANAGEMENT SYSTEM/组图1.png" class="w-full h-full object-cover" />
                                </div>
                            </div>
                            <p class="text-gray-500 text-xs font-mono mt-3">Cat Mobile Shelter Placement Rendering</p>
                        </div>
                    </section>
                `
            },
            'project-oyster': {
                title: 'Xiamen Oysters',
                subtitle: 'Interactive installation · 2024–2025',
                exhibitions: ['exh-1','exh-2','exh-4'],
                images: ['assets/images/placeholder-exhibition.svg'],
                videos: [
                    'assets/images/XIAMEN OYSTER/1.mp4',
                    'assets/images/XIAMEN OYSTER/2.mp4',
                    'assets/images/XIAMEN OYSTER/3.mp4',
                    'assets/images/XIAMEN OYSTER/4.mp4',
                    'assets/images/XIAMEN OYSTER/5.mp4',
                    'assets/images/XIAMEN OYSTER/6.mp4',
                    'assets/images/XIAMEN OYSTER/7.mp4',
                    'assets/images/XIAMEN OYSTER/8.mp4',
                    'assets/images/XIAMEN OYSTER/9无噪点.mp4',
                    'assets/images/XIAMEN OYSTER/10无噪点.mp4'
                ],
                content: `
                    <!-- Header: intro + unified meta module -->
                    <div class="mb-16 border-b border-gray-800 pb-8">
                        <div class="max-w-4xl mx-auto mb-4">
                            <p class="text-gray-300 font-light text-sm md:text-base leading-relaxed">Xiamen Oyster is a collaborative digital media project developed with marine scientists. The installation translates oyster ecology into an interactive breathing landscape using sensors and projections.</p>
                        </div>

                        <div class="project-meta">
                            <div class="meta-item">
                                <div class="meta-label">TYPE</div>
                                <div class="meta-value">Interactive installation</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">ROLE</div>
                                <div class="meta-value">Installation & interaction design</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">TOOLS</div>
                                <div class="meta-value">TouchDesigner, Arduino, sensors</div>
                            </div>
                        </div>

                        <!-- Exhibition history removed: exhibitions now displayed under TOOLS via shared data -->
                    </div>
                    <!-- Demo Video (oyster) -->
                    <section class="mb-12">
                        <div class="max-w-4xl mx-auto">
                            <h3 class="text-white font-bold mb-4 border-l-2 border-emerald-500 pl-3">Video</h3>
                            <div class="aspect-video bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden">
                                <iframe class="w-full h-full deferred-youtube" data-youtube-src="https://www.youtube-nocookie.com/embed/Jlnb2bhOOrQ?autoplay=1&mute=1" title="Xiamen Oysters video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
                            </div>
                            <p class="text-gray-600 text-xs font-mono mt-3">Short film documenting the oyster project</p>
                        </div>
                    </section>

                    <!-- 1. Overview (Text Only) -->
                    <section class="mb-24">
                        <div class="max-w-4xl mx-auto space-y-6 text-gray-300 font-light leading-relaxed text-sm md:text-base text-justify">
                            <p>
                                Xiamen Oyster is a collaborative digital media project developed at the Institute of Creativity and Innovation. Working with marine scientists from the College of Ocean and Earth Sciences, our team studied oysters in Xiamen Bay – their physiology, survival, and how human activity disturbs their fragile habitats.
                            
                            <p>
                                The project takes the form of an interactive installation combining video, real-time visuals and sculptural elements. As environmental data shifts, the oyster body and its digital twin begin to flicker, blur and “mutate”, hinting at a slow alienation in both form and behaviour.
                            
                        </div>
                    </section>

                    <!-- 2. Interleaved Layout: Interaction (Left Img, Right Text) -->
                    <section class="grid grid-cols-1 md:grid-cols-12 gap-10 mb-24 items-start">
                        <div class="md:col-span-7 space-y-3">
                               <div class="aspect-[4/3] bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden relative group" onclick="openLightbox('assets/images/XIAMEN OYSTER/audience_interaction.jpg')">
                                   <!-- Audience interaction photo -->
                                   <img src="assets/images/XIAMEN OYSTER/audience_interaction.jpg" alt="Audience interaction" class="w-full h-full object-cover" />
                               </div>
                            <p class="text-gray-600 text-xs font-mono">Visitors engaging with the sensing tank.</p>
                        </div>
                        <div class="md:col-span-5 text-gray-400 font-light text-sm leading-relaxed pb-4">
                            <div class="mb-6 w-full bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden" onclick="openLightbox('assets/images/XIAMEN OYSTER/牡蛎封面.JPG')">
                                <div class="aspect-[4/3] w-full flex items-center justify-center overflow-hidden">
                                    <img src="assets/images/XIAMEN OYSTER/牡蛎封面.JPG" alt="Oyster cover" class="w-full h-full object-cover" />
                                </div>
                            </div>
                            <p>
                                Ideally, oysters act as living filters for the bay. In the installation, visitors' hand gestures over the tank disrupt the digital water flow, simulating the anthropogenic stress placed on these creatures. The light flickers in response, creating a visual rhythm of disturbance and recovery.
                            
                        </div>
                    </section>

                    <!-- 3. Wide Background Section (Exhibition View) -->
                    <!-- Full width breakout -->
                    <div class="relative w-[100vw] ml-[50%] -translate-x-[50%] h-[70vh] mb-24 overflow-hidden">
                        <div class="absolute inset-0 cursor-zoom-in" onclick="openLightbox('assets/images/XIAMEN OYSTER/展览现场.jpg')">
                            <img src="assets/images/XIAMEN OYSTER/展览现场.jpg" alt="Exhibition view – main installation space at G Art Museum" class="w-full h-full object-cover" />
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-black/20 pointer-events-none"></div>
                        </div>
                        <!-- Caption -->
                        <div class="absolute bottom-10 right-10 md:right-20 text-right">
                            <p class="text-gray-400/80 text-xs font-mono tracking-widest uppercase">Exhibition view – main installation space at G Art Museum</p>
                        </div>
                    </div>

                    <!-- 4. Interleaved Layout: Visual System (Left Text, Right Scroll Strip) -->
                    <section class="grid grid-cols-1 md:grid-cols-12 gap-10 mb-24 items-center">
                        <div class="md:col-span-4 text-gray-400 font-light text-sm leading-relaxed order-2 md:order-1">
                            <p class="mb-4">
                                The visual system is generated in real-time using TouchDesigner. We 3D-scanned local oyster shells and subjected them to digital erosion algorithms.
                            
                            <p>
                                From a healthy, solid form to a glitching, dissolved wireframe, the visual sequence narrates the invisible damage caused by microplastics and heavy metals over time.
                            
                        </div>
                        
                        <!-- Horizontal Scroll Strip -->
                        <div class="md:col-span-8 order-1 md:order-2 space-y-3">
                            <div id="project-videos-project-oyster" class="w-full overflow-x-auto pb-4 flex gap-4 no-scrollbar cursor-grab active:cursor-grabbing"></div>
                            <p class="text-gray-600 text-xs font-mono text-right">Visual evolution sequence – from organic to alienated.</p>
                        </div>
                    </section>

                    <!-- 5. Final Image (Team/Group) -->
                    <section class="mb-24 max-w-4xl mx-auto">
                            <div class="aspect-[4/3] bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden relative group mb-3" onclick="openLightbox('assets/images/XIAMEN OYSTER/合影.jpg')">
                                <img src="assets/images/XIAMEN OYSTER/合影.jpg" alt="Group photo" class="w-full h-full object-cover" />
                        </div>
                        <p class="text-gray-600 text-xs font-mono text-center">Xiamen Oyster research and installation team.</p>
                    </section>
                    
                    <!-- Credits (Subtle) -->
                    <div class="border-t border-gray-900 pt-10 text-center">
                        <p class="text-xs font-mono text-gray-600 mb-2">SUPPORTED BY KNOWLEDGE EXCHANGE FUND, UCA (UK)</p>
                        <p class="text-xs font-mono text-gray-700">
                            LEAD: Dr Stephen Connolly  ·  ADVISOR: Dr Francesca Brunetti 
                            TEAM: Simiao Yang, Ruiyan Cheng, Xuan Huang, Zhewen Hu, Ruixin Pan, Xinyue Gan, Yi Wang, Yiyang Gao</p>
                        </p>
                    </div>
                `
            },
            'project-table': {
                title: 'They Breathe Under the Table',
                subtitle: 'Interactive installation · 2025',
                images: ['assets/images/placeholder-project.svg'],
                videos: [],
                content: `
                    <!-- (Using page-level background video instead) -->
                    <!-- Block A: Meta + Hero Wide Shot (unified header module) -->
                    <section class="grid grid-cols-1 md:grid-cols-12 gap-10 mb-24 border-b border-gray-900 pb-12">
                        <!-- Left: Intro + Meta (full-width on md+) -->
                        <div class="md:col-span-12 flex flex-col justify-center">
                            <div class="mb-4 max-w-4xl mx-auto">
                                <p class="text-gray-300 font-light text-sm md:text-base leading-relaxed">They Breathe Under the Table listens to subtle breath and microbial activity. The installation translates exhaled CO₂ and fermentation into slow shifts of sound, light and movement.</p>
                            </div>

                            <div class="project-meta max-w-4xl mx-auto px-4 md:px-0">
                                <div class="meta-item">
                                    <div class="meta-label">TYPE</div>
                                    <div class="meta-value">Interactive installation</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-label">ROLE</div>
                                    <div class="meta-value">Interaction design, sound & visual design</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-label">TOOLS</div>
                                    <div class="meta-value">TouchDesigner, Arduino, breath sensor, speakers</div>
                                </div>
                            </div>
                        </div>

                        <!-- Right image placeholder removed so meta aligns with intro -->
                    </section>

                    <!-- Intro Text (Poetic) -->
                    <section class="mb-24 max-w-5xl mx-auto px-4 md:px-0">
                        <div class="text-gray-300 font-light leading-relaxed text-sm md:text-base text-left space-y-6">
                            <p>
                                <em>They Breathe Under the Table</em> is an interactive installation that listens to something almost invisible: breath. A small sourdough culture hides beneath an ordinary table, quietly fermenting. As visitors lean in and breathe toward the sensor, their exhaled CO₂ wakes the microbes, triggering subtle shifts in sound, light and moving bread. The table becomes a breathing organism, where domestic furniture, living bacteria and human bodies share the same air.
                            
                            <p>
                                By using local materials that respond to Fujian’s humid coastal climate, the work explores how life, matter and environment are entangled. What looks like a familiar home setting slowly turns uncanny, revealing the often-ignored dependencies between everyday comfort and microbial labour.
                            
                        </div>
                    </section>

                    <!-- Moved Hero Image -->
                    <section class="mb-12 max-w-5xl mx-auto px-4 md:px-0">
                        <div class="aspect-[4/3] bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden relative group mx-auto md:max-w-[820px] w-full md:max-h-[520px] max-h-[360px]" onclick="openLightbox('assets/images/they breathe under the table/整体图.jpg')">
                            <img src="assets/images/they breathe under the table/整体图.jpg" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity duration-500 md:max-h-[520px] max-h-[360px]" />
                        </div>
                        <p class="text-gray-600 text-xs font-mono mt-3 text-center">Installation view；</p>
                    </section>

                    <!-- Block B: Interaction & Details (Interleaved) -->
                    <section class="mb-20">
                        <div class="mb-6">
                            <h3 class="text-white font-bold mb-2 border-l-2 border-emerald-500 pl-3">Breathing System</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-stretch">
                        
                        <!-- Left Column: Interaction + Sensor Detail -->
                        <div class="space-y-8 flex flex-col justify-between h-full">
                            <div>
                                <p class="text-gray-400 font-light text-sm leading-relaxed mb-6">
                                    The installation stages a closed breath–fermentation circuit beneath an ordinary table. Sourdough cultures ferment in glass vessels, releasing CO₂ that is captured by a hidden sensor. The data slowly drives changes in sound, light and the movement of the “breathing” bread, allowing microbial activity to script its own rhythms in the room without needing visible human interaction.
                                
                            </div>
                            
                            <!-- Sensor Detail Image -->
                            <div class="space-y-3">
                                <div class="h-full bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden relative group flex items-center justify-center" style="min-height:240px;" onclick="openLightbox('SENSOR_DETAIL')">
                                     <img src="assets/images/they breathe under the table/发酵瓶.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity duration-500" />
                                </div>
                                <p class="text-gray-600 text-xs font-mono">Breath sensor and sourdough culture hidden under the table.</p>
                            </div>

                            <p class="text-gray-400 font-light text-sm leading-relaxed">
                                Light, sound and the projected “bacteria” field shift with changing CO₂ levels, making microbial activity present as a slow, environmental mood rather than a direct interface.
                            
                        </div>

                        <!-- Right Column: Visuals & Visual effects -->
                        <div class="space-y-8 flex flex-col justify-between h-full">
                            
                               <!-- Closer Installation View -->
                               <div class="space-y-3">
                                 <div class="h-full bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden relative group flex items-center justify-center" style="min-height:240px;" onclick="openLightbox('TABLE_CLOSE_UP')">
                                      <img src="assets/images/they breathe under the table/面包.jpg" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity duration-500" />
                                  </div>
                                   <p class="text-gray-600 text-xs font-mono">Installation view – close-up of table surface and lighting.</p>
                               </div>

                            <div class="pt-8">
                                <h3 class="text-white font-bold mb-4 border-l-2 border-emerald-500 pl-3">Visual effects</h3>
                                <!-- Vertical Stack (No Scroll) -->
                                <div class="flex flex-col gap-4">
                                    <div class="w-full aspect-video bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden group">
                                         <img src="assets/images/they breathe under the table/呼气.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity" />
                                    </div>
                                    <div class="w-full aspect-video bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden group">
                                         <img src="assets/images/they breathe under the table/吸气.png" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Block C: Demo Video -->
                    <section class="mb-24">
                        <h3 class="text-white font-bold mb-6 border-l-2 border-emerald-500 pl-3">Demo video</h3>
                        <div class="aspect-video bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden">
                            <iframe class="w-full h-full deferred-youtube" data-youtube-src="https://www.youtube-nocookie.com/embed/Z20HzWhbNBQ?enablejsapi=1&playsinline=1&rel=0&modestbranding=1&autoplay=1&mute=1" title="They Ferment Beneath the Table - demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
                        </div>
                        <p class="text-gray-600 text-xs font-mono mt-3">Short documentation of the installation</p>
                    </section>
                `
            },
            'project-traces': {
                title: 'TRACES',
                subtitle: 'Interactive installation · 2024',
                exhibitions: [],
                content: `
                    <!-- Hero: stacked intro + info bar + full-row image -->
                    <section class="mb-12">
                        <div class="max-w-4xl mx-auto">
                            <div class="max-w-4xl mx-auto mb-4">
                                <p class="text-gray-300 font-light text-sm md:text-base leading-relaxed">
                                    A gesture-based installation where waves, particles, and erasing surfaces expose the fragile line between presence and disappearance.
                                </p>
                                <p class="text-gray-500 text-xs font-mono mt-3">This short experiment explores how digital traces appear and vanish in real time.</p>

                                <div class="mt-4 mb-2">
                                    <div class="project-meta">
                                        <div class="meta-item">
                                            <div class="meta-label">TYPE</div>
                                            <div class="meta-value">Interactive installation</div>
                                        </div>
                                        <div class="meta-item">
                                            <div class="meta-label">ROLE</div>
                                            <div class="meta-value">Concept, visual system, coding</div>
                                        </div>
                                        <div class="meta-item">
                                            <div class="meta-label">TOOLS</div>
                                            <div class="meta-value">Processing, Kinect / camera, TouchDesigner</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="w-full flex justify-center md:justify-end">
                                <div class="max-w-[1100px] w-full bg-gray-900 border border-gray-800 cursor-zoom-in overflow-hidden" onclick="openLightbox('assets/images/trance/手势.png')">
                                    <div class="aspect-[910/385] w-full flex items-center justify-center overflow-hidden">
                                        <img src="assets/images/trance/手势.png" class="w-full h-full object-cover" />
                                    </div>
                                </div>
                            </div>
                            <h5 class="text-gray-200 text-sm font-medium mt-2">Overall interaction</h5>
                        </div>
                    </section>

                    <!-- Block A: Interaction Logic -->
                    <section class="mb-16">
                        <h4 class="text-white font-bold mb-4 border-l-2 border-emerald-500 pl-3">Interaction Logic</h4>
                        <div class="max-w-4xl mx-auto">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-3">
                                    <div class="uniform-thumb bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/trance/DSC03166.JPG')">
                                        <div class="aspect-[670/520] w-full"><img src="assets/images/trance/DSC03166.JPG" class="w-full h-full object-cover" /></div>
                                    </div>
                                    <div class="uniform-thumb bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/trance/交互1.png')">
                                        <div class="aspect-[670/520] w-full"><img src="assets/images/trance/交互1.png" class="w-full h-full object-cover" /></div>
                                    </div>
                                    <div class="uniform-thumb bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/trance/交互2.png')">
                                        <div class="aspect-[670/520] w-full"><img src="assets/images/trance/交互2.png" class="w-full h-full object-cover" /></div>
                                    </div>
                                </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-400">
                                <div>
                                    <strong class="text-white">Hand movement generates ripple-like trails</strong>
                                    <p class="mt-2">Hand movement generates ripple-like trails across the surface.</p>
                                </div>
                                <div>
                                    <strong class="text-white">Particles cluster and disperse</strong>
                                    <p class="mt-2">Particles cluster and disperse, visualizing how traces slowly drift away.</p>
                                </div>
                                <div>
                                    <strong class="text-white">Erasing / decay layer</strong>
                                    <p class="mt-2">An erasing layer slowly wipes the screen, making every gesture temporary.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Block B: Visual System -->
                    <section class="mb-16">
                        <h4 class="text-white font-bold mb-6 border-l-2 border-emerald-500 pl-3">Visual System</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-4">
                            <div class="uniform-thumb bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/trance/大场景.png')">
                                <img src="assets/images/trance/大场景.png" class="w-full h-full object-cover" />
                            </div>
                            <div class="uniform-thumb bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/trance/测试.png')">
                                <img src="assets/images/trance/测试.png" class="w-full h-full object-cover" />
                            </div>
                            <div class="uniform-thumb bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/trance/场景.png')">
                                <img src="assets/images/trance/场景.png" class="w-full h-full object-cover" />
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-400 mb-4">
                            <div><strong class="text-white">Studio setup</strong><p class="mt-2">Studio setup — projection, camera and reflective surface.</p></div>
                            <div><strong class="text-white">Ripple / particle detail</strong><p class="mt-2">Close-up of water texture reacting to gesture.</p></div>
                            <div><strong class="text-white">Screen output</strong><p class="mt-2">Projected wave pattern as digital trace.</p></div>
                        </div>
                        <p class="text-gray-400 text-sm">Color, blur and decay speed change with gesture intensity, turning subtle motion into visible “digital traces”.</p>
                    </section>

                    <!-- Block C: Technical Setup -->
                    <section class="mb-16">
                        <h4 class="text-white font-bold mb-6 border-l-2 border-emerald-500 pl-3">Technical Setup</h4>
                        <div class="grid grid-cols-1 md:grid-cols-12 gap-6 tech-setup-grid">
                            <div class="md:col-span-5">
                                <div class="bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/trance/DSC03176.JPG')">
                                    <div class="aspect-[4/3] w-full flex items-center justify-center overflow-hidden">
                                        <img src="assets/images/trance/DSC03176.JPG" class="w-full h-full object-cover" />
                                    </div>
                                </div>
                            </div>
                            <div class="md:col-span-7 text-gray-400 text-sm">
                                <p>Built with Processing and a depth camera, the system tracks hand movements and converts them into wave fields and particle forces in real time.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Demo Video (added per request) -->
                    <section class="mb-12">
                        <div class="max-w-4xl mx-auto">
                            <h3 class="text-white font-bold mb-4 border-l-2 border-emerald-500 pl-3">Demo video</h3>
                            <div class="aspect-video bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden">
                                <iframe class="w-full h-full deferred-youtube" data-youtube-src="https://www.youtube-nocookie.com/embed/5U0iGzVXuFI?autoplay=1&mute=1" title="TRACES demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
                            </div>
                            <p class="text-gray-600 text-xs font-mono mt-3">Short demo of the installation</p>
                        </div>
                    </section>

                    <!-- Final Reflection note -->
                    <section class="mb-24">
                        <p class="text-gray-400 text-sm final-note">Traces is a gesture-based installation where waves, particles and erasing surfaces expose the fragile line between presence and disappearance. This short experiment explores how digital traces appear and vanish in real time.</p>
                    </section>
                `
            },
            'project-chronicles': {
                title: 'Chronicles of Time',
                subtitle: 'Interactive installation · 2023',
                exhibitions: ['exh-6'],
                content: `
                    <!-- Header: intro + unified meta module (concise intro) -->
                    <div class="mb-12 border-b border-gray-800 pb-6">
                        <div class="max-w-4xl mx-auto mb-3">
                            <p class="text-gray-300 font-light text-sm md:text-base leading-relaxed">An interactive city-corner simulation where microplastic particles slowly erode a 3D landscape, turning everyday places into sites of gradual decay.</p>
                        </div>

                        <div class="project-meta max-w-4xl mx-auto">
                            <div class="meta-item"><div class="meta-label">TYPE</div><div class="meta-value">Interactive installation</div></div>
                            <div class="meta-item"><div class="meta-label">ROLE</div><div class="meta-value">Concept, interaction design</div></div>
                            <div class="meta-item"><div class="meta-label">TOOLS</div><div class="meta-value">Unity, custom sensors</div></div>
                        </div>
                    </div>

                    <!-- Block A: Overall View (Hero) -->
                    <section class="mb-20">
                        <h3 class="text-lg text-white font-bold mb-2 border-l-2 border-emerald-500 pl-3">Overall View</h3>
                        <p class="text-gray-400 text-xs font-mono mb-4">Interactive corner view where particles slowly erode the landscape.</p>

                        <div class="w-full bg-gray-900 border border-gray-800 cursor-zoom-in mb-4" onclick="openLightbox('assets/images/CHRONICLES OF TIME/粒子化.png')">
                            <div class="aspect-[171/111] w-full flex items-center justify-center overflow-hidden">
                                <img src="assets/images/CHRONICLES OF TIME/粒子化.png" class="w-full h-full object-cover" />
                            </div>
                        </div>
                        <p class="text-gray-600 text-xs font-mono">Wide shot – city corner with projection and particle field.</p>
                    </section>

                    <!-- Block B: Interaction & Visualization -->
                    <section class="mb-20 grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
                        <div class="md:col-span-5">
                            <h4 class="text-white font-bold mb-3 border-l-2 border-emerald-500 pl-3">Interaction Logic</h4>
                            <p class="text-gray-300 font-light text-sm md:text-base leading-relaxed">Viewers use click to stir waves, disturb particles, and trigger erosion in specific corners of the scene. Over time, their actions leave visible scars, revealing how small behaviours accumulate into lasting damage.</p>
                        </div>
                        <div class="md:col-span-7 flex gap-4">
                            <div class="flex-1 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/CHRONICLES%20OF%20TIME/%E6%88%AA%E5%B1%8F2025-12-16%2022.12.58.png')">
                                <div class="aspect-[4/3] w-full flex items-center justify-center overflow-hidden">
                                    <img src="assets/images/CHRONICLES%20OF%20TIME/%E6%88%AA%E5%B1%8F2025-12-16%2022.12.58.png" class="w-full h-full object-cover" />
                                </div>
                            </div>
                            <div class="flex-1 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/CHRONICLES OF TIME/建模.png')">
                                <div class="aspect-[4/3] w-full flex items-center justify-center overflow-hidden">
                                    <img src="assets/images/CHRONICLES OF TIME/建模.png" class="w-full h-full object-cover" />
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Optional Demo Video (kept as a block) -->
                    <section class="mb-20">
                        <h4 class="text-white font-bold mb-3 border-l-2 border-emerald-500 pl-3">Demo Video</h4>
                        <div class="aspect-video bg-gray-900 border border-gray-800 flex items-center justify-center overflow-hidden mb-2 cursor-zoom-in">
                            <iframe class="w-full h-full deferred-youtube" data-youtube-src="https://www.youtube-nocookie.com/embed/5U0iGzVXuFI?enablejsapi=1&playsinline=1&rel=0&modestbranding=1&autoplay=1&mute=1" title="Chronicles of Time - demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
                        </div>
                        <p class="text-gray-600 text-xs font-mono">Short documentation of interaction and projection mapping.</p>
                    </section>

                    <!-- Block C: Erosion Timeline -->
                    <section class="mb-20">
                        <h4 class="text-white font-bold mb-4 border-l-2 border-emerald-500 pl-3">Erosion Over Time</h4>
                        <div class="w-full overflow-hidden mb-4">
                            <div class="flex gap-4" style="animation: scroll-left 14s linear infinite;">
                                <div class="flex-none w-80 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in">
                                    <img src="assets/images/CHRONICLES OF TIME/jjj.png" class="w-full h-full object-cover" />
                                </div>
                                <div class="flex-none w-80 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in">
                                    <img src="assets/images/CHRONICLES OF TIME/jjj2.png" class="w-full h-full object-cover" />
                                </div>
                                <div class="flex-none w-80 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in">
                                    <img src="assets/images/CHRONICLES OF TIME/jjj3.png" class="w-full h-full object-cover" />
                                </div>
                                <div class="flex-none w-80 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in">
                                    <img src="assets/images/CHRONICLES OF TIME/jjj4.png" class="w-full h-full object-cover" />
                                </div>
                                <!-- duplicate for seamless loop -->
                                <div class="flex-none w-80 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in">
                                    <img src="assets/images/CHRONICLES OF TIME/jjj.png" class="w-full h-full object-cover" />
                                </div>
                                <div class="flex-none w-80 bg-black border border-gray-800 rounded-md overflow-hidden cursor-zoom-in">
                                    <img src="assets/images/CHRONICLES OF TIME/jjj2.png" class="w-full h-full object-cover" />
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-400 text-sm">From intact streetscape to fragmented ruins, the scene records how microplastics quietly hollow out the city over time.</p>
                    </section>

                    <!-- Block D: Technical Setup -->
                    <section class="mb-20">
                        <h4 class="text-white font-bold mb-4 border-l-2 border-emerald-500 pl-3">Technical Setup</h4>
                        <div class="grid grid-cols-1 md:grid-cols-12 gap-6 items-center">
                            <div class="md:col-span-5">
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/CHRONICLES%20OF%20TIME/%E6%B8%A9%E5%BA%A6sensor.png')">
                                        <div class="aspect-[4/3] w-full"><img src="assets/images/CHRONICLES%20OF%20TIME/%E6%B8%A9%E5%BA%A6sensor.png" class="w-full h-full object-cover" alt="Sensor" /></div>
                                    </div>
                                    <div class="bg-gray-900 border border-gray-800 rounded-md overflow-hidden cursor-zoom-in" onclick="openLightbox('assets/images/CHRONICLES OF TIME/arduino.png')">
                                        <div class="aspect-[4/3] w-full"><img src="assets/images/CHRONICLES OF TIME/arduino.png" class="w-full h-full object-cover" alt="Arduino" /></div>
                                    </div>
                                </div>
                            </div>
                            <div class="md:col-span-7 text-gray-400 font-light text-sm leading-relaxed">
                                <p>Built in Touchdesigner with temperature sensors. Depth data from the corner scene drives particle systems that simulate plastic accumulation. The system records interaction time and position, gradually amplifying damage in frequently touched areas.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Block E: Reflection -->
                    <section class="mb-24">
                        <p class="text-gray-400 text-sm final-note">Chronicles of Time started as a technical experiment in erosion shaders, but it became a way to think about how invisible waste reshapes our shared spaces. The work asks whether the slow damage we ignore today will eventually redraw the map of our everyday lives.</p>
                    </section>
                `
            },
            'project-noah': {
                title: 'NOAH’S ARK 铜舟共济',
                subtitle: 'Documentary film · 2024',
                exhibitions: ['exh-3','exh-5'],
                content: `
                    <div class="mb-12">
                        
                        <div class="project-meta">
                            <div class="meta-item"><div class="meta-label">TYPE</div><div class="meta-value">Documentary film</div></div>
                            <div class="meta-item"><div class="meta-label">ROLE</div><div class="meta-value">Director, editor</div></div>
                            <div class="meta-item"><div class="meta-label">TOOLS</div><div class="meta-value">Cinema camera, Premiere Pro</div></div>
                        </div>
                        <div class="mb-8 mt-6">
                            <div class="max-w-4xl mx-auto">
                                <div class="aspect-video bg-black border border-gray-800 flex items-center justify-center">
                                    <iframe class="w-full h-full deferred-youtube" data-youtube-src="https://www.youtube-nocookie.com/embed/I6Ql-mUPwkA?enablejsapi=1&playsinline=1&rel=0&modestbranding=1&autoplay=1&mute=1" title="Noah's Ark - video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
                                </div>
                            </div>
                        </div>
                        <div class="max-w-4xl mx-auto">
                            <p class="text-gray-300 font-light text-sm leading-relaxed">An observational work about a barber shop. This film has a subtle narrative spanning a day’s work and conversation in this venerable establishment. The addition of a tonally interesting and innovative framing voiceover adds layers of poetic resonance to this work. It is an affectionate look into the labour of long serving workers in a place of social gathering and talk.</p>
                        </div>
                    </div>
                `
            }
        };

        // Helper: render exhibitions bar for a project (secondary metadata)
        function getProjectExhibitionsHTML(data) {
            if (!data || !data.exhibitions || !data.exhibitions.length) return '';
            let html = '<div class="project-exhibitions max-w-4xl mx-auto mt-2 mb-6">';
            html += '<div class="text-gray-600 tracking-wider text-xs md:text-sm font-mono mb-2">EXHIBITIONS</div>';
            data.exhibitions.forEach((exhId) => {
                const exh = exhibitionData[exhId];
                if (exh) {
                    html += `<div class="exh-line text-gray-500 text-xs md:text-sm my-1 cursor-pointer hover:text-emerald-400 font-mono" onclick="event.stopPropagation(); openExhibitionModal('${exhId}')">${exh.title} · ${exh.meta}</div>`;
                }
            });
            html += '</div>';
            html += '</div>';
            return html;
        }

        const exhibitionData = {
            'exh-1': {
                title: '“LOVE WAS THE PEARL OF HER OYSTER” Joint Exhibition',
                meta: 'MAY–JUL 2025 · FUZHOU, CHINA · G ART MUSEUM',
                role: 'Installation Artist · Immersive Installation — “Xiamen Oysters”',
                desc: 'Installation views from Xiamen Oysters, an interactive light installation where oyster shells, projections and a water tank translate marine data into a slow, breathing seascape.',
                images: [
                    "assets/images/XIAMEN OYSTER/TEAM_PHOTO_OR_WIDE_VIEW.jpg",
                    "assets/images/XIAMEN OYSTER/展览现场.jpg",
                    "assets/images/XIAMEN OYSTER/audience_interaction.jpg",
                    "assets/images/XIAMEN OYSTER/牡蛎封面.JPG",
                    "assets/images/XIAMEN OYSTER/DSC01002.JPG",
                    "assets/images/XIAMEN OYSTER/2 2.jpg",
                    "assets/images/XIAMEN OYSTER/DSC01000.JPG",
                    "assets/images/XIAMEN OYSTER/DSC01001.JPG"
                ],
                videos: [],
                projectId: 'project-oyster'
            },
            'exh-2': { title: 'XMAS – Open Science Conference', meta: 'JAN–FEB 2025 · XIAMEN', role: 'Exhibiting Artist', desc: 'Invited art program at the 7th Xiamen Symposium on Marine Environmental Sciences (XMAS). An interdisciplinary collaboration with marine scientists, translating oyster ecological data into sensory narratives to explore restoration and symbiosis within a scientific context.', images: ["assets/images/XIAMEN OYSTER/第七届厦门海洋环境开放科学大会展览 (1).jpg","assets/images/XIAMEN OYSTER/第七届厦门海洋环境开放科学大会展览 (3).jpg"], videos: [], projectId: 'project-oyster' },
            'exh-3': { title: 'AFFECT·ACENCY.AND ATTENTION:AUDIOVISUALNARRATIVESSHARING ZHdK/ICI', meta: 'NOV 2025 · XIAMEN', role: 'Co-creator', desc: 'A collaborative academic project between ICI (XMU) and ZHdK (Zurich). This exhibition explores the intersection of digital and social realities, constructing a landscape of contemporary audiovisual narratives that transcend the boundaries of fiction and non-fiction to question human existential conditions.', images: ["assets/images/OPEN_EXHIBITION – Affect, Agency.png","assets/images/OPEN_EXHIBITION – Affect, Agency2.png","assets/images/OPEN_EXHIBITION – Affect, Agency3.png","assets/images/OPEN_EXHIBITION – Affect, Agency4.png"], videos: [], imageAspect: 'aspect-[4/3]', projectId: 'project-noah' },
            'exh-4': { title: '12th Marine Science Open Day', meta: 'DEC 2024 · XIAMEN', role: 'Exhibiting Artist', desc: 'Invited showcase at the 12th Marine Science Open Day. Through interactive installations and educational workshops, the project bridged the gap between marine science and the local community, translating complex ecological data into accessible visual experiences to foster public environmental awareness.', images: ["assets/images/XIAMEN OYSTER/第十三届厦大海洋科学开放日展览 (1).jpg","assets/images/XIAMEN OYSTER/第十三届厦大海洋科学开放日展览 (2).jpg"], videos: [], projectId: 'project-oyster' },
            'exh-5': { title: 'What are in the Park_ Screen', meta: '21 OCT – 05 NOV 2024 · XIAMEN, CHINA', role: 'Co-creator', desc: 'OPEN PARK: Youth Curatorial Experiment An experimental platform by the ICI Art Museum for independent student curation. It invites young artists to re-contextualize their work by exploring the interplay between space, content, and the audience, turning the museum into a site of creative inquiry.', images: ["assets/images/What are in the Park_ Screen1.png","assets/images/What are in the Park_ Screen2.png","assets/images/What are in the Park_ Screen3.jpeg","assets/images/What are in the Park_ Screen4.jpg"], videos: [], projectId: 'project-noah' },
            'exh-6': { title: 'Chinese CHI 2023 (The 11th International Symposium of Chinese CHI)', meta: 'NOV 2023 · BALI', role: 'Co-creator', desc: 'Organized by ICACHI, Chinese CHI is a premier forum connecting the international HCI community with the booming Chinese computing industry. Held in Bali, Indonesia, the 2023 symposium was themed "Generative, Reflective, and Envisioning." It explored the future values, social significance, and ethical boundaries of Human-Computer Interaction in the era of generative technology.', images: ["assets/images/CHRONICLES OF TIME/证书.png"], videos: [], projectId: 'project-chronicles' }
        };

        // --- Logic: Open Project Detail ---
        window.openProjectDetail = function(id) {
            const data = projectData[id];
            if (!data) return;
            const container = document.getElementById('project-detail-content');
            const exhibitionsHTML = getProjectExhibitionsHTML(data);
            container.innerHTML = `
                <h1 class="text-4xl text-white font-light mb-2 tracking-wide">${data.title}</h1>
                <div class="text-gray-500 font-mono mb-4">${data.subtitle}</div>
                <div class="project-body">${data.content}</div>
            `;

            // After content insertion, try to find the TOOLS meta element and insert exhibitions directly under it
            if (exhibitionsHTML) {
                // Prefer inserting after the whole meta grid so exhibitions sit under the entire meta block
                const metaGrid = container.querySelector('.grid.grid-cols-1.md\\:grid-cols-3');
                const wrapper = document.createElement('div');
                wrapper.innerHTML = exhibitionsHTML;
                if (metaGrid && metaGrid.parentNode) {
                    // Insert after the meta grid
                    metaGrid.parentNode.insertBefore(wrapper, metaGrid.nextSibling);
                } else {
                    // Fallback: try the TOOLS label insertion as before
                    const metaLabels = container.querySelectorAll('.text-gray-600.tracking-wider');
                    let toolsLabel = null;
                    metaLabels.forEach(el => {
                        if (el.textContent && el.textContent.trim().toUpperCase() === 'TOOLS') toolsLabel = el;
                    });
                    if (toolsLabel) {
                        const parentCol = toolsLabel.closest('div');
                        parentCol.parentNode.insertBefore(wrapper, parentCol.nextSibling);
                    } else {
                        // Final fallback: insert before project body
                        const projectBody = container.querySelector('.project-body');
                        projectBody.parentNode.insertBefore(wrapper, projectBody);
                    }
                }
            }
            // After inserting content, if the project has videos, render them into the visual-evolution placeholder
            const videos = data.videos || [];
            if (videos.length) {
                const vidStrip = document.createElement('div');
                vidStrip.className = 'max-w-4xl mx-auto mb-12 flex gap-4 overflow-x-auto no-scrollbar';
                videos.forEach(src => {
                    const vwrap = document.createElement('div');
                    vwrap.className = 'flex-none w-80 aspect-video bg-black border border-gray-800 overflow-hidden';
                    const v = document.createElement('video');
                    v.src = src;
                    v.autoplay = true;
                    v.muted = true;
                    v.loop = true;
                    v.playsInline = true;
                    v.controls = true;
                    v.className = 'w-full h-full object-cover';
                    vwrap.appendChild(v);
                    vidStrip.appendChild(vwrap);
                });
                const placeholderId = 'project-videos-' + id;
                const placeholder = document.getElementById(placeholderId);
                if (placeholder) {
                    // clear placeholder then insert
                    placeholder.innerHTML = '';
                    placeholder.appendChild(vidStrip);
                } else {
                    // fallback: append to end of content
                    container.appendChild(vidStrip);
                }
            }
            // toggle fermentation page-level bg video only for project-table
            try { if (id === 'project-table') toggleProjectTableBgVideo(true); else toggleProjectTableBgVideo(false); } catch(e){}
            // ensure site-level bg video is not visible when using project-level bg
            const siteVid = document.getElementById('bg-site'); if (siteVid) siteVid.style.display = 'none';
            navigateTo('project-detail');
        };

        // --- NEW: Go to Exhibition (from Project Detail) ---
        window.goToExhibition = function(exhId) {
            // 1. Navigate to Exhibitions page
            navigateTo('exhibitions');
            // 2. Wait for page transition, then open modal
            setTimeout(() => {
                openExhibitionModal(exhId);
            }, 600); // Wait slightly longer than page fade time
        }

        // --- Logic: Modal ---
        window.openExhibitionModal = function(id) {
            const data = exhibitionData[id];
            if (!data) return;
            
            document.getElementById('modal-title').textContent = data.title;
            document.getElementById('modal-meta').textContent = data.meta;
            document.getElementById('modal-role').textContent = data.role;
            document.getElementById('modal-desc').textContent = data.desc;

            // Handle Images Scroll Strip
            const imgContainer = document.getElementById('modal-images-container');
            imgContainer.innerHTML = ''; // Clear previous
            
            const images = data.images || ["assets/images/placeholder-exhibition.svg"];
            const videos = data.videos || [];

            // Preload images to determine if any landscape exists
            const preloadPromises = images.map(src => {
                return new Promise(resolve => {
                    const tmp = new Image();
                    tmp.onload = () => resolve({ src, w: tmp.naturalWidth, h: tmp.naturalHeight });
                    tmp.onerror = () => resolve({ src, w: 0, h: 0 });
                    tmp.src = src;
                });
            });
            Promise.all(preloadPromises).then(results => {
                // Log any failed loads for debugging
                const failed = results.filter(r => r.w === 0 && r.h === 0).map(r => r.src);
                if (failed.length) console.warn('openExhibitionModal: image preload failed for:', failed);
                const hasLandscape = results.some(r => r.w > r.h);
                const targetAspect = hasLandscape ? 'aspect-[4/3]' : 'aspect-[3/4]';
                results.forEach((r, idx) => {
                    const src = (r.w === 0 && r.h === 0) ? 'assets/images/placeholder-exhibition.svg' : r.src;
                    // Wrapper card so caption and underline can align to the same width
                    const card = document.createElement('div');
                    card.className = `thumb-card flex-none w-80 ${targetAspect} bg-gray-900 border border-gray-800 flex flex-col items-stretch justify-start text-gray-700 font-mono text-xs overflow-hidden`;

                    const imgWrap = document.createElement('div');
                    imgWrap.className = 'w-full h-full flex items-center justify-center overflow-hidden';
                    const img = document.createElement('img');
                    img.alt = data.title || 'exhibition image';
                    if (r.h > r.w) {
                        img.className = 'w-full h-full object-contain';
                    } else {
                        img.className = 'w-full h-full object-cover';
                    }
                    img.src = src;
                    imgWrap.appendChild(img);
                    imgWrap.onclick = () => openLightbox(src);

                    card.appendChild(imgWrap);

                    // apply a small inline transition delay to create a gentle stagger
                    card.style.transitionDelay = `${120 + idx * 90}ms`;
                    imgContainer.appendChild(card);
                });
            });

            videos.forEach(src => {
                const vidDiv = document.createElement('div');
                vidDiv.className = "flex-none w-80 aspect-video bg-black border border-gray-800 flex items-center justify-center text-gray-700 font-mono text-xs overflow-hidden";
                const video = document.createElement('video');
                video.src = src; video.controls = true; video.className = 'w-full h-full object-cover';
                vidDiv.appendChild(video);
                imgContainer.appendChild(vidDiv);
            });

            const btn = document.getElementById('modal-project-btn');
            if (data.projectId) {
                btn.classList.remove('hidden');
                btn.onclick = () => { closeModal(); setTimeout(() => openProjectDetail(data.projectId), 300); };
            } else { btn.classList.add('hidden'); }
            
            const modal = document.getElementById('exhibition-modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('open'), 10);
        }
        window.closeModal = function() {
            const modal = document.getElementById('exhibition-modal');
            modal.classList.remove('open');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        // --- Logic: Lightbox ---
        window.openLightbox = function(src) {
            const modal = document.getElementById('lightbox-modal');
            const placeholder = document.getElementById('lightbox-placeholder');
            const container = document.getElementById('lightbox-img-container');
            container.innerHTML = '';
            const lower = src.toLowerCase();
            if (lower.endsWith('.mp4') || lower.endsWith('.webm') || lower.endsWith('.ogg')) {
                const video = document.createElement('video');
                video.src = src; video.controls = true; video.autoplay = true; video.className = 'max-w-[90vw] max-h-[80vh]';
                container.appendChild(video);
                placeholder.style.display = 'none';
            } else if (lower.endsWith('.png') || lower.endsWith('.jpg') || lower.endsWith('.jpeg') || lower.endsWith('.svg') || lower.endsWith('.gif')) {
                const img = document.createElement('img');
                img.src = src; img.alt = '';
                img.style.maxWidth = '90vw'; img.style.maxHeight = '80vh'; img.style.display = 'block';
                container.appendChild(img);
                placeholder.style.display = 'none';
            } else {
                placeholder.style.display = 'block';
                placeholder.textContent = src;
            }

            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('open'), 10);
        }
        window.closeLightbox = function() {
            const modal = document.getElementById('lightbox-modal');
            modal.classList.remove('open');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        // --- Nav Logic ---
        window.returnToHome = function() {
            document.querySelectorAll('.content-page').forEach(page => page.classList.remove('active'));
            appState = 'navigating';
            setTimeout(() => {
                container.style.visibility = 'visible';
                container.style.opacity = '1';
                footerHint.style.opacity = '1';
                bgImage.style.opacity = '0.4';
                bgOverlay.style.opacity = '1';
                appState = 'home';
                rings.forEach(r => { r.isHovered = false; r.expansion = 0; });
            }, 800);
        };
        
        

        function triggerTransition(ring) {
            appState = 'navigating';
            ring.expansion = 60; 
            ring.opacity = 0;
            container.style.opacity = '0';
            footerHint.style.opacity = '0';
            bgImage.style.opacity = '0';
            bgOverlay.style.opacity = '0';

            setTimeout(() => {
                container.style.visibility = 'hidden'; 
                const targetPage = document.getElementById(ring.targetPageId);
                if (targetPage) {
                    targetPage.classList.add('active');
                    appState = 'content';
                }
            }, 800);
        }

        // --- Ring Logic ---
        class Ring {
            constructor(config) {
                this.type = config.type; 
                this.radiusBase = config.radiusBase;
                this.noiseOffset = config.noiseOffset || Math.random() * 100;
                this.label = config.label || '';
                this.targetPageId = config.targetPageId || null;
                this.baseAngle = config.baseAngle || 0; 
                this.swayRange = config.swayRange || 0;
                this.swaySpeed = 0.0004 + Math.random() * 0.0002;
                this.angle = this.baseAngle; 
                this.points = [];
                this.numPoints = 180;
                this.ripplePhase = Math.random() * Math.PI * 2;
                this.rippleSpeed = 0.001 + Math.random() * 0.0005; 
                this.rippleDelay = config.rippleDelay || 0;
                
                if (this.type === 'main') {
                    this.opacity = 0.6; this.baseOpacity = 0.6; this.lineWidth = 3; this.baseLineWidth = 3; this.color = '255, 255, 255'; this.interactable = true;
                    // labels on main rings should slowly travel along the contour (scrolling), not pendulum-sway
                    // increased default rotationSpeed for a faster homepage scroll
                    this.rotationSpeed = config.rotationSpeed || (0.0015 * (Math.random() > 0.5 ? 1 : -1));
                } else if (this.type === 'ripple') {
                    this.opacity = config.opacity || 0.25; this.baseOpacity = this.opacity; this.lineWidth = config.lineWidth || 0.8; this.baseLineWidth = this.lineWidth; this.color = '180, 180, 180'; this.interactable = false; this.rotationSpeed = 0.00025 * (Math.random() > 0.5 ? 1 : -1); 
                } else {
                    this.opacity = 0.35; this.baseOpacity = 0.35; this.lineWidth = 1; this.baseLineWidth = 1; this.color = '160, 160, 160'; this.interactable = false; this.rotationSpeed = 0.0006 * (Math.random() > 0.5 ? 1 : -1);
                }
                this.expansion = 0; this.rippleScale = 1; this.isHovered = false; this.hoverTimer = 0;
                // configurable wobble amplitude (tweak to adjust contour irregularity)
                // slightly lower defaults per user's request to reduce curve intensity
                this.wobbleAmp = config.wobbleAmp || (this.type === 'main' ? 20 : 12);
                this.generateShape();
            }
            generateShape() {
                this.points = [];
                const offset = this.noiseOffset;
                if (this.type === 'ripple') {
                    // Ripples keep their organic distortion
                    const distortionScale = Math.max(0.1, Math.pow(this.radiusBase / 350, 1.2));
                    for (let i = 0; i < this.numPoints; i++) {
                        const theta = (i / this.numPoints) * Math.PI * 2;
                        const distortion = (Math.sin(theta * 2 + offset) * 15 + Math.cos(theta * 3 - offset) * 10) * distortionScale;
                        const r = this.radiusBase + distortion;
                        this.points.push({ x: Math.cos(theta) * r, y: Math.sin(theta) * r, r: r, theta: theta });
                    }
                } else if (this.type === 'main' || this.type === 'filler') {
                    // Main and filler rings: circular overall but with multi-frequency organic wobble
                    // Slightly softened wobble scale and harmonic weights (user requested reduced curvature)
                    const wobbleScale = Math.max(0.035, Math.pow(this.radiusBase / 450, 1.0)) * 1.1;
                    const perRingFactor = 1 + Math.sin(offset * 0.7) * 0.26 + Math.cos(offset * 0.3) * 0.14; // moderate per-ring variation
                    for (let i = 0; i < this.numPoints; i++) {
                        const theta = (i / this.numPoints) * Math.PI * 2;
                        // combine low-frequency and mid-frequency harmonics for an organic contour
                        const h1 = Math.sin(theta * 2 + offset) * (9 + this.wobbleAmp * 0.45);
                        const h2 = Math.cos(theta * 3 - offset * 0.5) * (6 + this.wobbleAmp * 0.35);
                        const h3 = Math.sin(theta * 5 + offset * 0.7) * (2 + this.wobbleAmp * 0.15);
                        const wobble = (h1 + h2 + h3) * wobbleScale * perRingFactor;
                        const r = this.radiusBase + wobble;
                        this.points.push({ x: Math.cos(theta) * r, y: Math.sin(theta) * r, r: r, theta: theta });
                    }
                } else {
                    // Fallback organic shape for any other custom types
                    const distortionScale = Math.max(0.1, Math.pow(this.radiusBase / 350, 1.2)); 
                    for (let i = 0; i < this.numPoints; i++) {
                        const theta = (i / this.numPoints) * Math.PI * 2;
                        const distortion = (Math.sin(theta * 3 + offset) * 10 + Math.sin(theta * 7 - offset * 0.5) * 5 + Math.cos(theta * 10 + offset) * 3) * distortionScale;
                        const r = this.radiusBase + distortion;
                        this.points.push({ x: Math.cos(theta) * r, y: Math.sin(theta) * r, r: r, theta: theta });
                    }
                }
            }
            update(dt, timestamp) {
                if (this.type === 'ripple') {
                    const speed = 0.03; const maxDist = 200; 
                    const currentDist = (timestamp * speed + this.rippleDelay) % maxDist;
                    this.expansion = currentDist;
                    let opFactor = 0;
                    if (currentDist < 20) { opFactor = currentDist / 20; } else { opFactor = 1 - (currentDist - 20) / (maxDist - 20); }
                    this.opacity = this.baseOpacity * opFactor;
                    this.angle += this.rotationSpeed;
                    return;
                }
                if (!this.interactable) {
                    this.opacity = this.baseOpacity + Math.sin(timestamp * 0.0005 + this.noiseOffset) * 0.05;
                    this.angle += this.rotationSpeed;
                    return; 
                }
    const dx = mouseX - centerX; const dy = mouseY - centerY; const dist = Math.sqrt(dx * dx + dy * dy);
    const scaledRadius = this.radiusBase * scaleFactor;
    // responsive hover/click zone to help touch users
    let zoneWidth = 70;
    if (window.innerWidth <= 480) zoneWidth = 120;
    else if (window.innerWidth <= 768) zoneWidth = 90;
    const isInZone = Math.abs(dist - scaledRadius) < zoneWidth;
	
	// Angular detection: check if mouse is within the label arc
	let mouseAngle = Math.atan2(dy, dx);
	if (mouseAngle < 0) mouseAngle += Math.PI * 2;
	let curAngle = this.angle % (Math.PI * 2);
	if (curAngle < 0) curAngle += Math.PI * 2;
	let angleDiff = mouseAngle - curAngle;
	if (angleDiff > Math.PI) angleDiff -= Math.PI * 2;
	if (angleDiff < -Math.PI) angleDiff += Math.PI * 2;
	
    // Only hover if within both distance AND angle range (smaller angle -> higher precision)
    const angleThreshold = 0.20;
	const isInAngleRange = Math.abs(angleDiff) < angleThreshold;
	
	this.isHovered = isInZone && isInAngleRange && appState === 'home';
	this.hoverTimer = this.isHovered ? 200 : 0;
                const anyHovered = rings.some(r => r.interactable && r.isHovered);
                if (this.isHovered) {
                    // when hovered, allow a small corrective rotation toward the mouse angle
                    this.angle += angleDiff * 0.1;
                    this.expansion += (12 - this.expansion) * 0.1;
                    this.opacity += (1.0 - this.opacity) * 0.1;
                    this.lineWidth += (5.0 - this.lineWidth) * 0.1;
                } else {
                    // instead of pendulum-like sway, advance the ring angle steadily so labels scroll along the contour
                    this.angle += this.rotationSpeed;
                    this.expansion += (0 - this.expansion) * 0.1;
                    const targetOpacity = anyHovered ? 0.1 : this.baseOpacity;
                    this.opacity += (targetOpacity - this.opacity) * 0.1;
                    const targetWidth = this.baseLineWidth;
                    this.lineWidth += (targetWidth - this.lineWidth) * 0.1;
                }
            }
            draw(ctx) {
                ctx.save(); ctx.translate(centerX, centerY);
                let currentScale = scaleFactor;
                if (this.type === 'ripple') { currentScale *= this.rippleScale; }
                ctx.scale(currentScale, currentScale);
                ctx.beginPath();
                ctx.strokeStyle = `rgba(${this.color}, ${this.opacity})`;
                ctx.lineWidth = this.lineWidth / currentScale; 
                ctx.lineCap = 'round';
                const renderPoints = this.points.map(p => {
                    const r = p.r + this.expansion;
                    return { x: Math.cos(p.theta) * r, y: Math.sin(p.theta) * r };
                });
                ctx.moveTo(renderPoints[0].x, renderPoints[0].y);
                for (let i = 1; i < renderPoints.length; i++) { ctx.lineTo(renderPoints[i].x, renderPoints[i].y); }
                ctx.closePath(); ctx.stroke();
                if (!this.interactable) { ctx.restore(); return; }
                let normAngle = this.angle % (Math.PI * 2); if (normAngle < 0) normAngle += Math.PI * 2;
                const pointIndex = Math.floor((normAngle / (Math.PI * 2)) * this.numPoints);
                const segmentLen = Math.floor(this.numPoints * 0.18); const halfLen = Math.floor(segmentLen / 2);
                ctx.beginPath();
                ctx.strokeStyle = `rgba(255, 255, 255, ${this.isHovered ? 1 : (this.opacity + 0.2)})`;
                ctx.lineWidth = (this.lineWidth + (this.isHovered ? 3 : 1.5)) / currentScale; 
                ctx.shadowBlur = this.isHovered ? 20 : 0; ctx.shadowColor = "white";
                for (let i = -halfLen; i <= halfLen; i++) {
                    let idx = (pointIndex + i + this.numPoints) % this.numPoints;
                    let p = renderPoints[idx];
                    if (i === -halfLen) ctx.moveTo(p.x, p.y); else ctx.lineTo(p.x, p.y);
                }
                ctx.stroke(); ctx.shadowBlur = 0;
                const centerP = renderPoints[pointIndex];
                const nextP = renderPoints[(pointIndex + 5) % this.numPoints];
                const prevP = renderPoints[(pointIndex - 5 + this.numPoints) % this.numPoints];
                const tangentAngle = Math.atan2(nextP.y - prevP.y, nextP.x - prevP.x);
                ctx.save(); ctx.translate(centerP.x, centerP.y); ctx.rotate(tangentAngle);
                ctx.fillStyle = this.isHovered ? "#ffffff" : "rgba(255,255,255,0.75)";
                const fontSize = this.isHovered ? 16 : 14; 
                ctx.font = `${this.isHovered ? '600' : '400'} ${fontSize / currentScale}px 'Courier New', monospace`; 
                ctx.textAlign = "center"; ctx.textBaseline = "middle"; ctx.fillText(this.label, 0, -14 / currentScale);
                ctx.restore(); ctx.restore();
            }
        }

		const rings = [];
        // background ring radii: increased spacing to make the overall ring system larger
        const bgRings = Array.from({ length: 12 }, (_, i) => 260 + i * 55);
		const globalBaseOffset = Math.random() * 100;

        // Concentric fillers to match the reference backdrop (scaled up)
        [75, 125, 169, 213, 256, 306, 356, 406, 456, 506].forEach((r, idx) => {
            rings.push(new Ring({ type: 'filler', radiusBase: r, noiseOffset: globalBaseOffset + idx * 0.25, opacity: 0.22, lineWidth: 1.1 }));
        });

        // increase spacing between interactive main rings to reduce simultaneous hover
        rings.push(new Ring({ type: 'main', radiusBase: 280, label: 'ABOUT & CONTACT', baseAngle: Math.PI * 0.78, swayRange: 0.35, targetPageId: 'page-about', noiseOffset: globalBaseOffset + 3.2 }));
        rings.push(new Ring({ type: 'main', radiusBase: 420, label: 'PROJECTS', baseAngle: Math.PI * 1.12, swayRange: 0.28, targetPageId: 'page-projects', noiseOffset: globalBaseOffset + 3.7 }));
        rings.push(new Ring({ type: 'main', radiusBase: 540, label: 'EXHIBITIONS', baseAngle: -0.18, swayRange: 0.42, targetPageId: 'page-exhibitions', noiseOffset: globalBaseOffset + 4.2 }));

        const numRipples = 10; const rippleOrigin = 520; // moved outward to match larger rings
		for(let i=0; i<numRipples; i++) {
			rings.push(new Ring({ type: 'ripple', radiusBase: rippleOrigin, noiseOffset: globalBaseOffset + 5 + i * 0.35, opacity: 0.18, lineWidth: 0.8, rippleDelay: i * (200 / 0.03 / numRipples) }));
		}

        // Generate an About-page clipPath that mimics the interactive ring contour
        function generateAboutClip() {
            const clipPathElem = document.querySelector('#clip-about path');
            if (!clipPathElem) return;
            const width = 300, height = 400; // use 3:4 portrait defaults
            const cx = width * 0.5, cy = height * 0.5;
            // slightly reduce base radius to add safe padding so contours don't touch SVG edges
            const radiusBase = Math.min(width, height) * 0.36 * 0.9; // scaled for portrait with padding
            // bias the ellipse to be portrait-oriented (taller than wide)
            const rxFactor = 0.88; // horizontal squeeze
            const ryFactor = 1.32; // vertical stretch (makes the contour vertical)
            const offset = globalBaseOffset + 7.1;
            const wobbleAmp = 12; // softened wobble for smoother contour
            const numPoints = 140;
            const wobbleScale = Math.max(0.05, Math.pow(radiusBase / 450, 1.0)) * 1.35;
            const perRingFactor = 1 + Math.sin(offset * 0.7) * 0.22 + Math.cos(offset * 0.3) * 0.12;
            let d = '';
            for (let i = 0; i < numPoints; i++) {
                const theta = (i / numPoints) * Math.PI * 2;
                const h1 = Math.sin(theta * 2 + offset) * (9 + wobbleAmp * 0.45);
                const h2 = Math.cos(theta * 3 - offset * 0.5) * (6 + wobbleAmp * 0.35);
                const h3 = Math.sin(theta * 5 + offset * 0.7) * (2 + wobbleAmp * 0.15);
                const wobble = (h1 + h2 + h3) * wobbleScale * perRingFactor;
                const r = radiusBase + wobble;
                const x = cx + Math.cos(theta) * r * rxFactor;
                const y = cy + Math.sin(theta) * r * ryFactor; // stretch vertically for portrait/vertical feel
                if (i === 0) d += `M ${x.toFixed(2)} ${y.toFixed(2)}`;
                else d += ` L ${x.toFixed(2)} ${y.toFixed(2)}`;
            }
            d += ' Z';
            clipPathElem.setAttribute('d', d);
            // after updating clip path, regenerate diffused contours to match (pass width/height)
            generateAboutContours(d, width, height);
        }

        function generateAboutContours(baseD, width = 300, height = 400) {
            // Minimal, safe implementation: replace the group's paths with three contour copies
            const group = document.getElementById('about-contours');
            if (!group) return;
            // preserve existing image href if present
            const existingImg = group.querySelector('image');
            const imgHref = existingImg ? existingImg.getAttribute('href') : 'assets/images/简介.jpg';
            // clear group
            while (group.firstChild) group.removeChild(group.firstChild);
            // re-add image sized to width/height
            const imgEl = document.createElementNS('http://www.w3.org/2000/svg', 'image');
            imgEl.setAttribute('href', imgHref);
            imgEl.setAttribute('x', '0'); imgEl.setAttribute('y', '0');
            imgEl.setAttribute('width', String(width)); imgEl.setAttribute('height', String(height));
            imgEl.setAttribute('preserveAspectRatio', 'xMidYMid meet');
            imgEl.setAttribute('class', 'about-svg-image');
            imgEl.setAttribute('onclick', "openLightbox('" + imgHref + "')");
            group.appendChild(imgEl);
            // add two contours (mid and outer) — remove the original inner layer
            const mid = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            mid.setAttribute('d', baseD);
            mid.setAttribute('class', 'contour-path contour-mid');
            mid.setAttribute('style', 'transform: scale(1.02); opacity: 0.6;');
            group.appendChild(mid);
            const outer = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            outer.setAttribute('d', baseD);
            outer.setAttribute('class', 'contour-path contour-outer');
            outer.setAttribute('style', 'transform: scale(1.04); opacity: 0.35;');
            group.appendChild(outer);
        }

        // Animate about contours: simple subtle opacity wobble to avoid undefined variables elsewhere
        function animateAboutContours(timestamp) {
            const group = document.getElementById('about-contours');
            if (!group) return;
            const paths = group.querySelectorAll('path');
            paths.forEach((p, i) => {
                const base = 0.12 + i * 0.06;
                const extra = Math.sin((timestamp * 0.001) + i) * 0.03;
                p.style.opacity = (base + extra).toString();
            });
        }

        function resize() {
            width = window.innerWidth; height = window.innerHeight;
            canvas.width = width * dpr; canvas.height = height * dpr;
            canvas.style.width = width + 'px'; canvas.style.height = height + 'px';
            // reset transform before scaling to avoid cumulative scales
            ctx.setTransform(1, 0, 0, 1, 0, 0);
            ctx.scale(dpr, dpr);

            // responsive center Y: push rings slightly lower on smaller screens to avoid nav overlap
            centerX = width * 0.5;
            if (width <= 480) {
                centerY = height * 0.62; // phone
            } else if (width <= 768) {
                centerY = height * 0.60; // small tablet
            } else if (width <= 1024) {
                centerY = height * 0.575; // large tablet
            } else {
                centerY = height * 0.55; // desktop
            }

            // compute base scale based on available space then apply responsive multiplier
            const distToCenter = Math.min(centerX, centerY);
            const maxRadius = 650; const safeMargin = 120; const availableSpace = distToCenter - safeMargin;
            let baseScale = 1;
            if (availableSpace < maxRadius) baseScale = Math.max(0.45, availableSpace / maxRadius);

            // responsive multiplier by viewport width
            let responsiveScale = 1;
            if (width <= 480) responsiveScale = 0.55; // phone
            else if (width <= 768) responsiveScale = 0.75; // small tablet
            else if (width <= 1024) responsiveScale = 0.88; // large tablet
            else responsiveScale = 1;

            // set targetScaleFactor and let animate() lerp scaleFactor smoothly
            let finalScale = baseScale * responsiveScale;
            // if very wide screen, boost the rings slightly for a fuller full-screen effect
            if (width >= 1200) finalScale *= 1.08;
            targetScaleFactor = finalScale;
        }
        // update about clip when resizing so its contour matches current algorithm
        window.addEventListener('resize', () => {
            generateAboutClip();
        });
        window.addEventListener('resize', resize); resize();
        // generate about clip once at init
        generateAboutClip();
        window.addEventListener('mousemove', e => { mouseX = e.clientX; mouseY = e.clientY; });
        window.addEventListener('click', () => {
            if (appState !== 'home') return;
            const activeRing = rings.find(r => r.interactable && r.isHovered);
            if (activeRing) triggerTransition(activeRing);
        });

        function drawBackground(ctx) {
            ctx.save();
            ctx.translate(centerX, centerY);
            // Draw organic background rings (non-interactive) using multi-harmonic wobble
                bgRings.forEach((r, idx) => {
                const alpha = Math.max(0.03, 0.085 - idx * 0.0035);
                ctx.beginPath();
                ctx.strokeStyle = `rgba(255,255,255,${alpha})`;
                ctx.lineWidth = idx === bgRings.length - 1 ? 2 : 1;

                const offsetNoise = globalBaseOffset + idx * 0.45;
                const numPts = 180; // match interactive ring resolution
                const wobbleBase = Math.max(0.03, Math.pow(r / 450, 1.0)) * 0.9; // slightly softened wobble to match user's request
                const perRingFactor = 1 + Math.sin(offsetNoise * 0.7) * 0.22 + Math.cos(offsetNoise * 0.3) * 0.12;

                for (let i = 0; i < numPts; i++) {
                    const theta = (i / numPts) * Math.PI * 2;
                    const h1 = Math.sin(theta * 2 + offsetNoise) * 8;
                    const h2 = Math.cos(theta * 3 - offsetNoise * 0.5) * 6;
                    const h3 = Math.sin(theta * 5 + offsetNoise * 0.7) * 2;
                    const wobble = (h1 + h2 + h3) * wobbleBase * perRingFactor;
                    const R = r * scaleFactor + wobble;
                    const x = Math.cos(theta) * R;
                    const y = Math.sin(theta) * R;
                    if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            });
            ctx.restore();
        }

		let lastTime = 0;
		function animate(timestamp) {
			const dt = timestamp - lastTime; lastTime = timestamp;
			if (appState === 'home' || appState === 'navigating') {
                ctx.clearRect(0, 0, width, height);
				drawBackground(ctx);
                // animate About contours to create subtle ring-like wobble
                animateAboutContours(timestamp);
				let cursorChanged = false; let activeLabel = null;
				rings.forEach(ring => {
					ring.update(dt, timestamp); ring.draw(ctx);
					if (ring.interactable && ring.isHovered) { cursorChanged = true; activeLabel = ring.label; }
				});
				if (activeLabel) { activeLayerNameSpan.textContent = ` · 当前：${activeLabel}`; activeLayerNameSpan.classList.add('visible'); } 
				else { activeLayerNameSpan.classList.remove('visible'); }
            }
            // smooth scale factor transition: lerp towards target to avoid jumpy resizing
            try {
                const lerpSpeed = 0.06; // smaller = slower smoothing
                scaleFactor += (targetScaleFactor - scaleFactor) * lerpSpeed;
            } catch (e) {}
            requestAnimationFrame(animate);
		}
        requestAnimationFrame(animate);
    </script>
    <script>
        // Mobile menu toggle: uses the .open class defined in CSS
        function toggleMobileMenu(show) {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('nav-toggle');
            if (!menu || !btn) return;
            const isOpen = menu.classList.contains('open');
            if (typeof show === 'undefined') show = !isOpen;
            if (show) {
                menu.classList.add('open');
                menu.setAttribute('aria-hidden', 'false');
                btn.setAttribute('aria-expanded', 'true');
                document.body.style.overflow = 'hidden';
            } else {
                menu.classList.remove('open');
                menu.setAttribute('aria-hidden', 'true');
                btn.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
            }
        }

        document.getElementById('nav-toggle')?.addEventListener('click', (e) => {
            e.stopPropagation(); toggleMobileMenu();
        });

        // Close when clicking outside the menu
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('nav-toggle');
            if (!menu) return;
            if (menu.classList.contains('open') && !menu.contains(e.target) && e.target !== btn) {
                toggleMobileMenu(false);
            }
        });

        // Close with Escape
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') toggleMobileMenu(false); });
    </script>
    <script>
        // Click-to-play YouTube loader
        (function(){
            function buildPlayOverlay(iframe){
                try{
                    var container = iframe.parentElement;
                    if(!container) return;
                    var cs = window.getComputedStyle(container).position;
                    if(cs === 'static' || !cs) container.style.position = 'relative';

                    if(container.querySelector('.yt-play-overlay')) return;

                    var overlay = document.createElement('div');
                    overlay.className = 'yt-play-overlay';
                    overlay.style.cssText = 'position:absolute;inset:0;display:flex;align-items:center;justify-content:center;cursor:pointer;background:rgba(0,0,0,0.22);transition:background .15s';

                    var btn = document.createElement('div');
                    btn.className = 'yt-play-button';
                    btn.style.cssText = 'width:72px;height:72px;border-radius:999px;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 24px rgba(0,0,0,0.6)';
                    btn.innerHTML = '<svg width="28" height="32" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg"><polygon points="0,0 28,16 0,32" fill="#00ffcc"/></svg>';

                    overlay.appendChild(btn);
                    overlay.addEventListener('click', function(){
                        setYouTubeSrc(iframe, true);
                        overlay.remove();
                    });

                    container.appendChild(overlay);
                }catch(e){ console.warn('buildPlayOverlay error', e); }
            }

            function setYouTubeSrc(iframe, autoplay){
                try{
                    if(!iframe) return;
                    if(iframe.dataset._ytLoaded) return;
                    var src = iframe.getAttribute('data-youtube-src') || iframe.dataset.youtubeSrc;
                    if(!src) return;
                    var url = new URL(src, window.location.href);
                    if(!url.searchParams.has('enablejsapi')) url.searchParams.set('enablejsapi','1');
                    url.searchParams.set('origin', location.origin);
                    if(autoplay){ url.searchParams.set('autoplay','1'); url.searchParams.set('mute','1'); }
                    iframe.src = url.toString();
                    iframe.dataset._ytLoaded = '1';
                }catch(e){ console.warn('setYouTubeSrc error', e); }
            }

            function prepareAll(){
                document.querySelectorAll('.deferred-youtube').forEach(function(iframe){ buildPlayOverlay(iframe); });
            }

            document.addEventListener('DOMContentLoaded', function(){
                prepareAll();
                var mo = new MutationObserver(function(mutations){
                    mutations.forEach(function(m){
                        m.addedNodes.forEach(function(node){
                            if(node.nodeType !== 1) return;
                            if(node.matches && node.matches('.deferred-youtube')) buildPlayOverlay(node);
                            var els = node.querySelectorAll && node.querySelectorAll('.deferred-youtube');
                            if(els && els.length) els.forEach(buildPlayOverlay);
                        });
                    });
                });
                mo.observe(document.body, { childList: true, subtree: true });
            });

            window.addEventListener('beforeunload', function(){
                document.querySelectorAll('.deferred-youtube').forEach(function(iframe){
                    try{ iframe.src = ''; iframe.removeAttribute('src'); delete iframe.dataset._ytLoaded; }catch(e){}
                });
            });
        })();
    </script>
</body>
</html>
